(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{kUR2:function(t,e,n){"use strict";n.r(e),n.d(e,"CollectionInnerModule",(function(){return Q}));var c=n("ofXK"),i=n("tyNb"),o=n("kmnG"),s=n("qFsG"),l=n("bSwM"),a=n("0IaG"),r=n("IJgu"),d=n("s0Cq"),b=n("OQ+D"),u=n("E/a4"),f=n("TNUc"),m=n("Q6ig"),p=n("vLcq"),h=n("fXoL"),g=n("1kSV"),v=n("CFzk"),A=n("5eHb"),C=n("668k"),S=n("WoM1");function T(t,e){1&t&&h.Ob(0,"app-loader",3),2&t&&h.pc("type","page")}const y=function(t,e){return{"fa-list-ul":t,"fa-th-large":e}};function I(t,e){if(1&t){const t=h.Ub();h.Tb(0,"i",28),h.ec("click",(function(){h.Ac(t);const e=h.ic(2);return e.view=!e.view})),h.Sb()}if(2&t){const t=h.ic(2);h.pc("ngClass",h.uc(1,y,t.view,!t.view))}}function k(t,e){if(1&t&&(h.Tb(0,"div",52),h.Lc(1),h.Sb()),2&t){const t=h.ic().$implicit;h.Ab(1),h.Nc("Page\xa0",t.pageNo,"")}}function w(t,e){if(1&t){const t=h.Ub();h.Tb(0,"div",32),h.Tb(1,"div",33),h.Tb(2,"div",34),h.Tb(3,"div",35),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).navgToCntnt(n)})),h.Ob(4,"img",36),h.Sb(),h.Tb(5,"div",37),h.Tb(6,"div",38),h.Tb(7,"button",39),h.Ob(8,"i",40),h.Sb(),h.Tb(9,"div",41),h.Tb(10,"a",14),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).cmnModal("email",void 0,n)})),h.Ob(11,"i",8),h.Lc(12,"Email"),h.Sb(),h.Tb(13,"a",14),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).cmnModal("getLink",void 0,n)})),h.Ob(14,"i",9),h.Lc(15,"Get a link"),h.Sb(),h.Sb(),h.Sb(),h.Tb(16,"div",42),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).cmnModal("addToCollection","",n)})),h.Ob(17,"i",43),h.Sb(),h.Tb(18,"div",44),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).delContent(n.contentId)})),h.Ob(19,"i",45),h.Sb(),h.Sb(),h.Sb(),h.Tb(20,"div",46),h.Tb(21,"div",47),h.Lc(22),h.Sb(),h.Tb(23,"div",48),h.Jc(24,k,2,1,"div",49),h.Sb(),h.Tb(25,"div",50),h.Tb(26,"mat-checkbox",51),h.ec("change",(function(n){h.Ac(t);const c=e.$implicit;return h.ic(4).selMe(n.checked,c)})),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&t){const t=e.$implicit,n=h.ic(4);h.Ab(4),h.pc("src",t.pdfImagePath?t.pdfImagePath:t.urlIconPath?t.urlIconPath:n.defImg,h.Cc),h.Ab(18),h.Mc(t.name),h.Ab(2),h.pc("ngIf",t.pageNo)}}function O(t,e){if(1&t&&(h.Tb(0,"div",30),h.Jc(1,w,27,3,"div",31),h.Sb()),2&t){const t=h.ic(3);h.Ab(1),h.pc("ngForOf",t.cntntArr)}}function M(t,e){1&t&&(h.Tb(0,"div",53),h.Lc(1," No Content Found "),h.Sb())}function x(t,e){if(1&t&&(h.Rb(0),h.Jc(1,O,2,1,"div",27),h.Jc(2,M,2,0,"div",29),h.Qb()),2&t){const t=h.ic(2);h.Ab(1),h.pc("ngIf",t.cntntArr.length>0),h.Ab(1),h.pc("ngIf",0==t.cntntArr.length)}}function L(t,e){if(1&t){const t=h.Ub();h.Tb(0,"tr"),h.Tb(1,"td",58),h.Tb(2,"mat-checkbox",51),h.ec("change",(function(n){h.Ac(t);const c=e.$implicit;return h.ic(4).selMe(n.checked,c)})),h.Sb(),h.Sb(),h.Tb(3,"td",58),h.Tb(4,"div",59),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).navgToCntnt(n)})),h.Tb(5,"div",60),h.Ob(6,"img",36),h.Sb(),h.Tb(7,"div",61),h.Lc(8),h.Sb(),h.Sb(),h.Sb(),h.Tb(9,"td",58),h.Lc(10),h.jc(11,"date"),h.Sb(),h.Tb(12,"td",62),h.Tb(13,"div",63),h.Tb(14,"div",38),h.Tb(15,"button",39),h.Ob(16,"i",40),h.Sb(),h.Tb(17,"div",41),h.Tb(18,"a",14),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).cmnModal("email",void 0,n)})),h.Ob(19,"i",8),h.Lc(20,"Email"),h.Sb(),h.Tb(21,"a",14),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).cmnModal("getLink",void 0,n)})),h.Ob(22,"i",9),h.Lc(23,"Get a link"),h.Sb(),h.Sb(),h.Sb(),h.Tb(24,"div",44),h.ec("click",(function(){return h.Ac(t),h.ic(4).cmnModal("addToCollection")})),h.Ob(25,"i",43),h.Sb(),h.Tb(26,"div",44),h.ec("click",(function(){h.Ac(t);const n=e.$implicit;return h.ic(4).delContent(n.contentId)})),h.Ob(27,"i",45),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&t){const t=e.$implicit,n=h.ic(4);h.Ab(6),h.pc("src",t.pdfImagePath?t.pdfImagePath:t.urlIconPath?t.urlIconPath:n.defImg,h.Cc),h.Ab(2),h.Mc(t.name),h.Ab(2),h.Mc(h.lc(11,3,t.updatedDate,"dd MMM, yyyy")||"N/A")}}function D(t,e){if(1&t&&(h.Tb(0,"tbody"),h.Jc(1,L,28,6,"tr",57),h.Sb()),2&t){const t=h.ic(3);h.Ab(1),h.pc("ngForOf",t.cntntArr)}}function $(t,e){1&t&&(h.Tb(0,"div",64),h.Lc(1," No Content Found "),h.Sb())}function P(t,e){if(1&t&&(h.Tb(0,"div",30),h.Tb(1,"table",54),h.Tb(2,"thead"),h.Tb(3,"tr"),h.Tb(4,"th"),h.Ob(5,"mat-checkbox"),h.Sb(),h.Tb(6,"th"),h.Lc(7,"Name"),h.Ob(8,"i",55),h.Sb(),h.Tb(9,"th"),h.Lc(10,"Date Modified"),h.Ob(11,"i",55),h.Sb(),h.Ob(12,"th"),h.Sb(),h.Sb(),h.Jc(13,D,2,1,"tbody",26),h.Sb(),h.Jc(14,$,2,0,"div",56),h.Sb()),2&t){const t=h.ic(2);h.Ab(13),h.pc("ngIf",t.cntntArr.length>0),h.Ab(1),h.pc("ngIf",0==t.cntntArr.length)}}function J(t,e){if(1&t){const t=h.Ub();h.Tb(0,"div",4),h.Tb(1,"h3",5),h.Lc(2),h.Tb(3,"div",6),h.Tb(4,"div",7),h.ec("click",(function(){h.Ac(t);const e=h.ic();return e.cmnModal("email",void 0,void 0,e.selColctn)})),h.Ob(5,"i",8),h.Sb(),h.Tb(6,"div",7),h.ec("click",(function(){h.Ac(t);const e=h.ic();return e.cmnModal("getLink",void 0,void 0,e.selColctn)})),h.Ob(7,"i",9),h.Sb(),h.Tb(8,"div",10),h.Tb(9,"div",11),h.Ob(10,"i",12),h.Sb(),h.Tb(11,"div",13),h.Tb(12,"a",14),h.ec("click",(function(){return h.Ac(t),h.ic().cmnModal("coll","dupl")})),h.Ob(13,"i",15),h.Lc(14,"Duplicate "),h.Sb(),h.Tb(15,"a",14),h.ec("click",(function(){return h.Ac(t),h.ic().cmnModal("coll","ren")})),h.Ob(16,"i",16),h.Lc(17,"Rename "),h.Sb(),h.Tb(18,"a",17),h.Ob(19,"i",18),h.Lc(20,"Download "),h.Tb(21,"div",19),h.Tb(22,"a",20),h.Ob(23,"i",21),h.Lc(24,"As a single PDF"),h.Sb(),h.Tb(25,"a",20),h.Ob(26,"i",22),h.Lc(27,"As separate items"),h.Sb(),h.Sb(),h.Sb(),h.Tb(28,"a",23),h.ec("click",(function(){return h.Ac(t),h.ic().actDeactColctn()})),h.Ob(29,"i"),h.Lc(30),h.Sb(),h.Sb(),h.Sb(),h.Jc(31,I,1,4,"i",24),h.Tb(32,"button",25),h.ec("click",(function(){return h.Ac(t),h.ic().cmnModal("resource")})),h.Lc(33,"Add Resource"),h.Sb(),h.Sb(),h.Sb(),h.Jc(34,x,3,2,"ng-container",26),h.Jc(35,P,15,2,"div",27),h.Sb()}if(2&t){const t=h.ic();h.Ab(2),h.Nc(" ",t.selColctn.name," "),h.Ab(26),h.Db("dropdown-item curs-ptr ",t.selColctn.isActive?"text-primary":"text-success",""),h.Ab(1),h.Db("mr-1 fas fa-toggle-",t.selColctn.isActive?"off":"on",""),h.Ab(1),h.Nc(" ",t.selColctn.isActive?"Deactivate":"Activate"," "),h.Ab(1),h.pc("ngIf",t.cntntArr.length>0),h.Ab(3),h.pc("ngIf",t.view),h.Ab(1),h.pc("ngIf",!t.view)}}function N(t,e){if(1&t){const t=h.Ub();h.Tb(0,"app-sel-itm-fxd-div",65),h.ec("delContent",(function(){return h.Ac(t),h.ic().delContent(void 0)})),h.Sb()}if(2&t){const t=h.ic();h.pc("selArr",t.selContentArr)("content",!0)}}let F=(()=>{class t{constructor(t,e,n,c,i,o){this.modalService=t,this.route=e,this.colctnSrv=n,this.toastr=c,this.router=i,this.dialog=o,this.view=!0,this.defImg=d.b,this.copyLink=t=>{t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")}}ngOnInit(){this.routerSubs=this.route.params.subscribe(t=>{this.id=parseInt(t.cid),this.initialiseState(),this.getColctn()})}initialiseState(){this.view=!0,this.disabled=!1,this.loading=!0,this.selColctn=void 0,this.selContentArr=[],this.multiForm=0,this.cntntArr=[],this.addContentArr=[]}cmnModal(t,e,n,c){if("email"==t){const t=this.modalService.open(b.a,{size:"lg"});t.componentInstance.type=c?"collection":"content",t.componentInstance.data=c||n}else if("getLink"==t){const t=this.modalService.open(u.a,{size:"lg"});t.componentInstance.type=c?"collection":"content",t.componentInstance.data=c||n}else if("addToCollection"==t){const t=this.modalService.open(f.a,{size:"lg"});t.componentInstance.data=Object.assign(Object.assign({},n),{type:"coll-inr"}),t.result.then(t=>{t&&t.id==this.id&&this.getCntntColl()})}else if("coll"==t){const t=this.modalService.open(m.a,{size:"lg"});t.componentInstance.colctn=this.selColctn,t.componentInstance.type=e,t.result.then(t=>{t&&"ren"==e&&(this.selColctn.name=t.name)})}else"resource"==t&&this.modalService.open(p.a,{size:"lg"}).result.then(t=>{t&&(this.addContentArr=t,this.addContent())})}addContent(){this.disabled=!0;let t={id:this.id,contents:[]};for(let e=0;e<this.addContentArr.length;e++)t.contents.push(this.addContentArr[e].contentId?this.addContentArr[e].contentId:this.addContentArr[e].id);this.colctnSrv.addContentColctn(t).subscribe(t=>{t&&(this.toastr.success(t.message||"Content added successfully","Success!"),this.getCntntColl()),this.dismissModal(),this.disabled=!1},t=>{this.dismissModal(),this.disabled=!1})}delContent(t){let e=t?[t]:this.selContentArr,n=1==e.length?"":"s";this.dialog.open(r.a,{data:{msg:`Are you sure you want to remove ${1==e.length?"this":"these"} content${n} from collection?`,title:"Remove Content"+n},autoFocus:!1}).afterClosed().subscribe(t=>{if(t){let t={collectionId:this.id,contentIds:e};this.colctnSrv.delContentColctn(t).subscribe(t=>{t&&(this.toastr.success(t.message||`Content${n} removed successfully`,"Success!"),this.selContentArr=[],this.getCntntColl())},e=>{this.toastr.error(t.message||"Unable to remove content"+n,"Error!")})}})}selMe(t,e){t?this.selContentArr.push(e.contentId):this.selContentArr=this.selContentArr.filter(t=>t!=e.id)}getCntntColl(){let t;this.loading=!0,t=this.id,this.colctnSrv.getContentColctn(t).subscribe(t=>{t&&t.result&&Array.isArray(t.result)&&t.result.length>0?this.cntntArr=t.result:t&&t.result&&Array.isArray(t.result)&&0==t.result.length&&(this.cntntArr=[]),this.loading=!1},t=>{this.loading=!1})}actDeactColctn(){let t=this.selColctn.isActive?"deactivate":"activate";this.dialog.open(r.a,{data:{msg:`Are you sure you want to ${t} this collection?`,title:(this.selColctn.isActive?"Deactivate":"Activate")+" collection"},autoFocus:!1}).afterClosed().subscribe(e=>{e&&this.colctnSrv.actDeactColctn([this.id],!this.selColctn.isActive).subscribe(e=>{e?(this.toastr.success(`Collection ${t}d successfully`,"Success!"),this.getColctn()):this.toastr.error(`Unable to ${t} collection`,"Error!")},t=>{})})}getColctn(){this.loading=!0,this.colctnSrv.getColctn(this.id).subscribe(t=>{t&&t.result?(this.selColctn=t.result,this.getCntntColl()):this.router.navigate(["/web-app/resource/collections"])},t=>{this.router.navigate(["/web-app/resource/collections"])})}navgToCntnt(t){this.router.navigate(["/web-app/view/"+t.contentId])}openModal(t){this.modalService.open(t,{size:"lg"}).result.then(t=>{},t=>{})}dismissModal(){this.modalService&&this.modalService.dismissAll()}ngOnDestroy(){this.dismissModal()}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(g.f),h.Nb(i.a),h.Nb(v.a),h.Nb(A.b),h.Nb(i.d),h.Nb(a.b))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-collection-inner"]],decls:3,vars:3,consts:[[3,"type",4,"ngIf"],["class","main main-employee p-3 container mt-3",4,"ngIf"],[3,"selArr","content","delContent",4,"ngIf"],[3,"type"],[1,"main","main-employee","p-3","container","mt-3"],[1,"mb-4","clearfix","heading","align-self-center"],[1,"float-right","d-flex"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-envelope","mr-1"],[1,"fa","fa-link","mr-1"],[1,"dropdown","align-self-center","mr-5"],["type","button","id","optionsDD","data-toggle","dropdown",1,"btn","btn-light","curs-ptr"],[1,"fas","fa-ellipsis-h"],["aria-labelledby","optionsDD",1,"dropdown-menu"],[1,"dropdown-item","curs-ptr",3,"click"],[1,"fas","fa-copy","mr-1"],[1,"fas","fa-edit","mr-1"],[1,"dropdown-item","dd","curs-ptr"],[1,"fa","fa-download","mr-1"],[1,"dropdown-menu"],[1,"dropdown-item"],[1,"fas","fa-file-pdf","mr-1"],[1,"fas","fa-file-alt","mr-1"],[3,"click"],["class","fa mr-4 curs-ptr align-self-center",3,"ngClass","click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[4,"ngIf"],["class","mt-2 row my-files",4,"ngIf"],[1,"fa","mr-4","curs-ptr","align-self-center",3,"ngClass","click"],["class","text-center mt-5 text-secondary","style","font-size: 20px;",4,"ngIf"],[1,"mt-2","row","my-files"],["class","card-container col-lg-3 col-md-4 col-sm-6 my-3 mx-auto mx-sm-0",4,"ngFor","ngForOf"],[1,"card-container","col-lg-3","col-md-4","col-sm-6","my-3","mx-auto","mx-sm-0"],[1,"card","curs-ptr"],[1,"card-body"],[1,"imagePreview","text-center",3,"click"],[3,"src"],[1,"options","rounded"],[1,"dropleft"],["type","button","id","shareDD","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn"],[1,"fas","fa-share-square"],["aria-labelledby","shareDD",1,"dropdown-menu"],[1,"btn","my-1",3,"click"],[1,"fas","fa-folder-plus"],[1,"btn",3,"click"],[1,"fas","fa-trash-alt"],[1,"card-footer"],[1,"name","text-truncate"],[1,"float-left","text-secondary","d-flex"],["class","items",4,"ngIf"],[1,"float-right"],[3,"change"],[1,"items"],[1,"text-center","mt-5","text-secondary",2,"font-size","20px"],[1,"table","table-hover"],[1,"fas","fa-sort-down","ml-1","align-top"],["class","mx-auto mt-5 text-secondary","style","font-size: 20px;",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"d-flex",3,"click"],[1,"imagePreview","border","mr-2"],[1,"name","align-self-center"],[1,"align-middle","options"],[1,"d-flex"],[1,"mx-auto","mt-5","text-secondary",2,"font-size","20px"],[3,"selArr","content","delContent"]],template:function(t,e){1&t&&(h.Jc(0,T,1,1,"app-loader",0),h.Jc(1,J,36,11,"div",1),h.Jc(2,N,1,2,"app-sel-itm-fxd-div",2)),2&t&&(h.pc("ngIf",e.loading),h.Ab(1),h.pc("ngIf",!e.loading),h.Ab(1),h.pc("ngIf",e.selContentArr.length>0))},directives:[c.m,C.a,c.k,c.l,l.a,S.a],pipes:[c.e],styles:[".dd[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{top:55%;left:-120%}.dd[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.min-height-val[_ngcontent-%COMP%]{min-height:230px}"]}),t})();var z=n("zJym"),U=n("tqvG"),G=n("Amnm"),q=n("IpHC"),R=n("u7Mw"),j=n("OraM"),E=n("FGg4"),_=n("P/0q");let H=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},providers:[v.a,_.a,E.a,j.a],imports:[[c.c,z.a,o.e,s.c,l.b]]}),t})();const K=[{path:"",component:F}];let Q=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},providers:[v.a],imports:[[c.c,i.h.forChild(K),o.e,s.c,l.b,z.a,a.e,U.a,G.a,q.a,R.a,H]]}),t})()}}]);