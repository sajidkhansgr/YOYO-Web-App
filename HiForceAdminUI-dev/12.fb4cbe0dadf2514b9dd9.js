(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{lu3c:function(t,e,a){"use strict";a.r(e),a.d(e,"LoginModule",(function(){return D}));var r=a("ofXK"),i=a("3Pt+"),o=a("tyNb"),s=a("bTqV"),n=a("kmnG"),l=a("qFsG");class c{static MatchPassword(t){if(!t.parent||!t)return null;const e=t.parent.get("pswd"),a=t.parent.get("confirmPswd");return e&&a?""===a.value||e.value===a.value?null:{passwordsNotMatching:!0}:null}static emailValidator(t){return t.value&&String(t.value).match(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,63})$/)?null:{invalidEmail:!0}}static numberValidator(t){return t.value&&String(t.value).match(/^(0|[1-9][0-9]*)$/)?null:{invalidNumber:!0}}static mobileNoValidator(t){return t.value&&String(t.value).match(/^(7[0-9]{8,10}|07[0-9]{8,10})$/)?null:{invalidMobile:!0}}static phoneNoValidator(t){return t.value&&String(t.value).match(/^0[0-9]{8,10}$/)?null:{invalidPhone:!0}}static aphaNumerValidator(t){return t.value&&String(t.value).match(/^[a-z0-9]+$/i)?null:{invAlphaNum:!0}}static nameValidator(t){return t.value&&String(t.value).match(/^[a-zA-Z_]+( [a-zA-Z_]+)*$/)?null:{invalidName:!0}}}var d=a("4Yiz"),u=a("fXoL");let b=(()=>{class t{}return t.LOGIN="api/User/Login",t.CHANGE_PASS="api/Account/ChangePassword",t.LIST_HUB="api/Hub/GetAll",t.ADD_HUB="api/Hub/Add",t.UPD_HUB="api/Hub/Update",t.GET_HUB="api/Hub/GetById",t.LIST_GRP="api/Group/GetAll",t.ADD_GRP="api/Group/Add",t.UPD_GRP="api/Group/Update",t.GET_GRP="api/Group/GetById",t.LIST_TAG="api/Tag/GetAll",t.ADD_TAG="api/Tag/Add",t.UPD_TAG="api/Tag/Update",t.GET_TAG="api/Tag/GetById",t.LIST_WRKSPC="api/Workspace/GetAll",t.ADD_WRKSPC="api/Workspace/Add",t.UPD_WRKSPC="api/Workspace/Update",t.GET_WRKSPC="api/Workspace/GetById",t.LIST_FLDR_WRKSPC="api/Folder/GetAllByWorkspace",t.ADD_FLDR="api/Folder/Add",t.ADD_CONT_FLDR="api/Folder/AddContentToFolder",t.UPD_FLDR="api/Folder/Update",t.DEL_FLDR="api/Folder/Delete",t.GET_FLDR="api/Folder/GetById",t})();var p=a("p0iN"),m=a("tk/3");let g=(()=>{class t{constructor(t,e){this.tokenDataServ=t,this.http=e}login(t){return this.http.post(""+b.LOGIN,t)}}return t.\u0275fac=function(e){return new(e||t)(u.ac(p.a),u.ac(m.b))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac}),t})();var h=a("5eHb"),f=a("iiaH");function v(t,e){1&t&&(u.Sb(0,"mat-error"),u.Hc(1," Email is required "),u.Rb())}function S(t,e){1&t&&(u.Sb(0,"mat-error"),u.Hc(1," Please enter a valid email address "),u.Rb())}function A(t,e){1&t&&u.Ob(0,"img",16)}const G=function(t,e){return{"fa-eye":t,"fa-eye-slash":e}};function R(t,e){if(1&t){const t=u.Tb();u.Sb(0,"div"),u.Sb(1,"form",7),u.dc("ngSubmit",(function(){return u.wc(t),u.hc().login()})),u.Sb(2,"mat-form-field",8),u.Sb(3,"mat-label"),u.Hc(4,"Email"),u.Rb(),u.Ob(5,"input",9),u.Ob(6,"i",10),u.Fc(7,v,2,0,"mat-error",6),u.Fc(8,S,2,0,"mat-error",6),u.Rb(),u.Sb(9,"mat-form-field",8),u.Sb(10,"mat-label"),u.Hc(11,"Password"),u.Rb(),u.Ob(12,"input",11),u.Sb(13,"i",12),u.dc("click",(function(){u.wc(t);const e=u.hc();return e.hide=!e.hide})),u.Rb(),u.Sb(14,"mat-error"),u.Hc(15," Password is required "),u.Rb(),u.Rb(),u.Sb(16,"div",13),u.Sb(17,"button",14),u.Fc(18,A,1,0,"img",15),u.Hc(19,"LOGIN "),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&t){const t=u.hc();u.Ab(1),u.mc("formGroup",t.loginForm),u.Ab(6),u.mc("ngIf",t.loginForm.get("email").hasError("required")),u.Ab(1),u.mc("ngIf",!t.loginForm.get("email").hasError("required")&&t.loginForm.get("email").hasError("invalidEmail")),u.Ab(4),u.mc("type",t.hide?"password":"text"),u.Ab(1),u.mc("ngClass",u.rc(7,G,t.hide,!t.hide)),u.Ab(4),u.mc("disabled",t.loginForm.invalid||t.disabled),u.Ab(1),u.mc("ngIf",t.disabled)}}const _=[{path:"",component:(()=>{class t{constructor(t,e,a,r,o,s,n){this.fb=t,this.authSer=e,this.tokenDataServ=a,this.router=r,this.route=o,this.toastr=s,this.dataServ=n,this.disabled=!1,this.hide=!0,this.loginForm=this.fb.group({email:["",[i.p.required,c.emailValidator]],password:["",i.p.required]})}ngOnInit(){this.redirectUrl=this.route.snapshot.queryParamMap.get("redirect_uri")}login(){this.disabled=!0,this.loginForm.valid&&this.authSer.login(this.loginForm.value).subscribe(t=>{if(console.log(t,"data"),t&&t.result&&t.result.token&&t.result.id){this.tokenDataServ.setTokenAndUser(t.result),this.toastr.success("Login successfully","Success"),this.dataServ.passDataSend("change");let e=d.a.redirectToUrl(this.redirectUrl);this.router.navigate([e])}else this.toastr.error(d.a.errMessage(t)||"Please check email or password!","Error!"),this.disabled=!1},t=>{console.log(t,"err"),this.disabled=!1})}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(i.d),u.Nb(g),u.Nb(p.a),u.Nb(o.b),u.Nb(o.a),u.Nb(h.b),u.Nb(f.a))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-login"]],hostAttrs:[1,"w-100"],decls:8,vars:1,consts:[[1,"text-center","mt-4"],["src","assets/images/logo.png","alt","Logo"],[1,"card","w-40","mx-auto","mt-4"],[1,"card-header","text-center"],[1,"mb-0","font-weight-bold"],[1,"card-body","p-5"],[4,"ngIf"],["name","loginForm","novalidate","",1,"w-75","mx-auto","p-4",3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100"],["matInput","","formControlName","email"],["matSuffix","",1,"secondary-text","fas","fa-user"],["matInput","","formControlName","password",3,"type"],["matSuffix","",1,"fas",3,"ngClass","click"],[1,"text-center"],["aria-label","LOG IN",1,"mt-2","btn","btn-primary",3,"disabled"],["class","loader-gif","src","assets/images/loader.gif",4,"ngIf"],["src","assets/images/loader.gif",1,"loader-gif"]],template:function(t,e){1&t&&(u.Sb(0,"div",0),u.Ob(1,"img",1),u.Rb(),u.Sb(2,"div",2),u.Sb(3,"div",3),u.Sb(4,"h4",4),u.Hc(5,"Login"),u.Rb(),u.Rb(),u.Sb(6,"div",5),u.Fc(7,R,20,10,"div",6),u.Rb(),u.Rb()),2&t&&(u.Ab(7),u.mc("ngIf",e.loginForm))},directives:[r.l,i.r,i.l,i.f,n.c,n.g,l.b,i.c,i.k,i.e,n.i,r.j,n.b],styles:[".loader-gif[_ngcontent-%COMP%]{height:24px;width:24px}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[g],imports:[[r.c,o.e.forChild(_),i.g,i.o,s.b,n.e,l.c]]}),t})()}}]);