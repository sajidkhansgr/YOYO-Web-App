(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{lu3c:function(e,t,r){"use strict";r.r(t),r.d(t,"LoginModule",(function(){return k}));var i=r("ofXK"),o=r("3Pt+"),a=r("tyNb"),s=r("bTqV"),n=r("kmnG"),b=r("qFsG"),c=r("zJym"),l=r("NpNY"),d=r("4Yiz"),u=r("fXoL"),m=r("qXBG"),p=r("p0iN"),f=r("5eHb"),h=r("iiaH"),g=r("668k");function S(e,t){1&e&&(u.Tb(0,"mat-error"),u.Jc(1," Email is required "),u.Sb())}function v(e,t){1&e&&(u.Tb(0,"mat-error"),u.Jc(1," Please enter a valid email address "),u.Sb())}function w(e,t){1&e&&u.Ob(0,"app-loader",18),2&e&&u.oc("type","btn")}const T=function(e,t){return{"fa-eye":e,"fa-eye-slash":t}};function y(e,t){if(1&e){const e=u.Ub();u.Tb(0,"div"),u.Tb(1,"form",7),u.ec("ngSubmit",(function(){return u.yc(e),u.ic().login()})),u.Tb(2,"mat-form-field",8),u.Tb(3,"mat-label"),u.Jc(4,"Email"),u.Sb(),u.Ob(5,"input",9),u.Ob(6,"i",10),u.Hc(7,S,2,0,"mat-error",6),u.Hc(8,v,2,0,"mat-error",6),u.Sb(),u.Tb(9,"mat-form-field",8),u.Tb(10,"mat-label"),u.Jc(11,"Password"),u.Sb(),u.Ob(12,"input",11),u.Tb(13,"i",12),u.ec("click",(function(){u.yc(e);const t=u.ic();return t.hide=!t.hide})),u.Sb(),u.Tb(14,"mat-error"),u.Jc(15," Password is required "),u.Sb(),u.Sb(),u.Tb(16,"div",13),u.Tb(17,"a",14),u.Jc(18," Forgot Password? "),u.Sb(),u.Sb(),u.Tb(19,"div",15),u.Tb(20,"button",16),u.Hc(21,w,1,1,"app-loader",17),u.Jc(22," LOGIN "),u.Sb(),u.Sb(),u.Sb(),u.Sb()}if(2&e){const e=u.ic();u.Ab(1),u.oc("formGroup",e.loginForm),u.Ab(6),u.oc("ngIf",e.loginForm.get("email").hasError("required")),u.Ab(1),u.oc("ngIf",!e.loginForm.get("email").hasError("required")&&e.loginForm.get("email").hasError("invalidEmail")),u.Ab(4),u.oc("type",e.hide?"password":"text"),u.Ab(1),u.oc("ngClass",u.tc(8,T,e.hide,!e.hide)),u.Ab(4),u.oc("routerLink","/auth/forgot-password"),u.Ab(3),u.oc("disabled",e.loginForm.invalid||e.disabled),u.Ab(1),u.oc("ngIf",e.disabled)}}const N=[{path:"",component:(()=>{class e{constructor(e,t,r,i,a,s,n){this.fb=e,this.authSer=t,this.tokenDataServ=r,this.router=i,this.route=a,this.toastr=s,this.dataServ=n,this.disabled=!1,this.hide=!0,this.loginForm=this.fb.group({email:["",[o.t.required,l.a.emailValidator]],password:["",o.t.required]})}ngOnInit(){this.redirectUrl=this.route.snapshot.queryParamMap.get("redirect_uri")}login(){this.disabled=!0,this.loginForm.valid&&this.authSer.login(this.loginForm.value).subscribe(e=>{if(e&&e.result&&e.result.token&&e.result.id){this.tokenDataServ.setTokenAndUser(e.result),this.toastr.success("Login successfully","Success"),this.dataServ.passDataSend("login");let t=d.a.redirectToUrl(this.redirectUrl);this.router.navigate("/dashboard"===t&&3==e.result.roleId?["/web-app/resource/experiences"]:[t])}else this.toastr.error(e.message||"Please check email or password!","Error!"),this.disabled=!1},e=>{this.disabled=!1})}}return e.\u0275fac=function(t){return new(t||e)(u.Nb(o.d),u.Nb(m.a),u.Nb(p.a),u.Nb(a.d),u.Nb(a.a),u.Nb(f.b),u.Nb(h.a))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-login"]],hostAttrs:[1,"w-100"],decls:8,vars:1,consts:[[1,"text-center","mt-4"],["src","assets/images/logo.png","alt","Logo"],[1,"card","w-40","mx-auto","my-4"],[1,"card-header","text-center"],[1,"mb-0","font-weight-bold"],[1,"card-body","p-5"],[4,"ngIf"],["name","loginForm","novalidate","",1,"w-75","mx-auto","p-4",3,"formGroup","ngSubmit"],["appearance","outline",1,"w-100"],["matInput","","formControlName","email","required",""],["matSuffix","",1,"fas","fa-envelope"],["matInput","","formControlName","password","required","",3,"type"],["matSuffix","",1,"fas",3,"ngClass","click"],[1,"text-right"],[2,"font-size","14px",3,"routerLink"],[1,"text-center"],["aria-label","LOG IN",1,"mt-3","btn","btn-primary",3,"disabled"],[3,"type",4,"ngIf"],[3,"type"]],template:function(e,t){1&e&&(u.Tb(0,"div",0),u.Ob(1,"img",1),u.Sb(),u.Tb(2,"div",2),u.Tb(3,"div",3),u.Tb(4,"h4",4),u.Jc(5,"Login"),u.Sb(),u.Sb(),u.Tb(6,"div",5),u.Hc(7,y,23,11,"div",6),u.Sb(),u.Sb()),2&e&&(u.Ab(7),u.oc("ngIf",t.loginForm))},directives:[i.m,o.v,o.m,o.g,n.c,n.g,b.b,o.c,o.l,o.f,o.s,n.i,i.k,n.b,a.g,g.a],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(t){return new(t||e)},providers:[m.a],imports:[[i.c,a.h.forChild(N),o.h,o.r,s.b,n.e,b.c,c.a]]}),e})()}}]);