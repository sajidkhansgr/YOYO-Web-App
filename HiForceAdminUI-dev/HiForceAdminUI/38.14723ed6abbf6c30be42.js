(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{iLFk:function(c,t,i){"use strict";i.r(t),i.d(t,"CollectionListModule",(function(){return J}));var n=i("ofXK"),e=i("tyNb"),o=i("bSwM"),l=i("Qu3c"),a=i("0IaG"),s=i("1kSV"),r=i("IJgu"),b=i("s0Cq"),d=i("OQ+D"),p=i("E/a4"),f=i("Q6ig"),u=i("fXoL"),m=i("CFzk"),h=i("5eHb"),g=i("668k"),v=i("WoM1");const S=function(c,t){return{"fa-sort-up align-bottom":c,"fa-sort-down align-top":t}};function A(c,t){if(1&c){const c=u.Ub();u.Tb(0,"span",16),u.ec("click",(function(){u.Bc(c);const i=t.$implicit,n=t.index;return u.ic(2).sortChange(i,n)})),u.Mc(1),u.Ob(2,"i",17),u.Sb()}if(2&c){const c=t.$implicit;u.Ab(1),u.Oc(" ",c.n,""),u.Ab(1),u.pc("ngClass",u.uc(2,S,c.asc,!c.asc))}}function T(c,t){if(1&c&&(u.Tb(0,"div",14),u.Mc(1," Sort by: "),u.Kc(2,A,3,5,"span",15),u.Sb()),2&c){const c=u.ic();u.Ab(2),u.pc("ngForOf",c.cols)}}function C(c,t){if(1&c){const c=u.Ub();u.Tb(0,"div",22),u.Tb(1,"div",23),u.Tb(2,"div",24),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).showContent(i.id)})),u.Ob(3,"img",25),u.Sb(),u.Tb(4,"div",26),u.Tb(5,"div",27),u.Mc(6),u.Sb(),u.Tb(7,"div",28),u.Tb(8,"div",29),u.Mc(9),u.jc(10,"date"),u.Sb(),u.Tb(11,"div",30),u.Mc(12,"l"),u.Sb(),u.Tb(13,"div",31),u.Mc(14),u.Sb(),u.Sb(),u.Tb(15,"div",2),u.Tb(16,"mat-checkbox",32),u.ec("change",(function(i){u.Bc(c);const n=t.$implicit;return u.ic(3).selMe(i.checked,n.id)})),u.Sb(),u.Sb(),u.Sb(),u.Tb(17,"div",33),u.Tb(18,"div",34),u.Tb(19,"button",35),u.Ob(20,"i",36),u.Sb(),u.Tb(21,"div",37),u.Tb(22,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("email",void 0,i)})),u.Ob(23,"i",39),u.Mc(24,"Email"),u.Sb(),u.Tb(25,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("getLink",void 0,i)})),u.Ob(26,"i",40),u.Mc(27,"Get a link"),u.Sb(),u.Sb(),u.Sb(),u.Tb(28,"div",41),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).actDeactColctn(i.id)})),u.Ob(29,"i"),u.Sb(),u.Tb(30,"div",34),u.Tb(31,"button",42),u.Ob(32,"i",43),u.Sb(),u.Tb(33,"div",44),u.Tb(34,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("coll","dupl",i)})),u.Ob(35,"i",45),u.Mc(36,"Duplicate"),u.Sb(),u.Tb(37,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("coll","ren",i)})),u.Ob(38,"i",46),u.Mc(39,"Rename"),u.Sb(),u.Tb(40,"a",47),u.Ob(41,"i",48),u.Mc(42,"Download "),u.Tb(43,"div",49),u.Tb(44,"a",50),u.Ob(45,"i",51),u.Mc(46,"As a single PDF"),u.Sb(),u.Tb(47,"a",50),u.Ob(48,"i",52),u.Mc(49,"As separate items"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb()}if(2&c){const c=t.$implicit,i=u.ic(3);u.Ab(3),u.pc("src",c.pdfImagePath?c.pdfImagePath:i.fldrIcon,u.Dc),u.Ab(3),u.Nc(c.name),u.Ab(3),u.Nc(u.lc(10,8,c.updatedDate,"dd MMM, yyyy")||"N/A"),u.Ab(5),u.Oc("",c.contentCount||0," Item(s)"),u.Ab(2),u.pc("checked",c.chk),u.Ab(13),u.Db("mr-1 fas fa-toggle-",i.isActiveColctn?"off text-primary":"on text-success","")}}function k(c,t){if(1&c&&(u.Rb(0),u.Tb(1,"div",20),u.Kc(2,C,50,11,"div",21),u.Sb(),u.Qb()),2&c){const c=u.ic(2);u.Ab(2),u.pc("ngForOf",c.colctnArr)}}function M(c,t){1&c&&(u.Tb(0,"div",53),u.Mc(1," No Collections Found "),u.Sb())}function y(c,t){if(1&c&&(u.Rb(0),u.Kc(1,k,3,1,"ng-container",18),u.Kc(2,M,2,0,"ng-template",null,19,u.Lc),u.Qb()),2&c){const c=u.xc(3),t=u.ic();u.Ab(1),u.pc("ngIf",t.colctnArr&&t.colctnArr.length>0)("ngIfElse",c)}}function w(c,t){if(1&c){const c=u.Ub();u.Tb(0,"th",60),u.ec("click",(function(){u.Bc(c);const i=t.$implicit,n=t.index;return u.ic(2).sortChange(i,n)})),u.Mc(1),u.Ob(2,"i",17),u.Sb()}if(2&c){const c=t.$implicit;u.Ab(1),u.Oc(" ",c.n,""),u.Ab(1),u.pc("ngClass",u.uc(2,S,c.asc,!c.asc))}}function O(c,t){if(1&c){const c=u.Ub();u.Tb(0,"tr"),u.Tb(1,"td",62),u.Tb(2,"mat-checkbox",32),u.ec("change",(function(i){u.Bc(c);const n=t.$implicit;return u.ic(3).selMe(i.checked,n.id)})),u.Sb(),u.Sb(),u.Tb(3,"td",63),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).showContent(i.id)})),u.Tb(4,"div",64),u.Tb(5,"div",65),u.Ob(6,"img",25),u.Sb(),u.Tb(7,"div",66),u.Mc(8),u.Sb(),u.Sb(),u.Sb(),u.Tb(9,"td",62),u.Mc(10),u.jc(11,"date"),u.Sb(),u.Tb(12,"td",67),u.Tb(13,"div",64),u.Tb(14,"div",34),u.Tb(15,"button",35),u.Ob(16,"i",36),u.Sb(),u.Tb(17,"div",37),u.Tb(18,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("email",void 0,i)})),u.Ob(19,"i",39),u.Mc(20,"Email"),u.Sb(),u.Tb(21,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("getLink",void 0,i)})),u.Ob(22,"i",40),u.Mc(23,"Get a link"),u.Sb(),u.Sb(),u.Sb(),u.Tb(24,"div",68),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).actDeactColctn(i.id)})),u.Ob(25,"i"),u.Sb(),u.Tb(26,"div",34),u.Tb(27,"button",42),u.Ob(28,"i",43),u.Sb(),u.Tb(29,"div",44),u.Tb(30,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("coll","dupl",i)})),u.Ob(31,"i",45),u.Mc(32,"Duplicate"),u.Sb(),u.Tb(33,"a",38),u.ec("click",(function(){u.Bc(c);const i=t.$implicit;return u.ic(3).cmnModal("coll","ren",i)})),u.Ob(34,"i",46),u.Mc(35,"Rename"),u.Sb(),u.Tb(36,"a",47),u.Ob(37,"i",48),u.Mc(38,"Download "),u.Tb(39,"div",49),u.Tb(40,"a",50),u.Ob(41,"i",51),u.Mc(42,"As a single PDF"),u.Sb(),u.Tb(43,"a",50),u.Ob(44,"i",52),u.Mc(45,"As separate items"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb()}if(2&c){const c=t.$implicit,i=u.ic(3);u.Ab(2),u.pc("checked",c.chk),u.Ab(4),u.pc("src",c.pdfImagePath?c.pdfImagePath:i.fldrIcon,u.Dc),u.Ab(2),u.Nc(c.name),u.Ab(2),u.Nc(u.lc(11,7,c.updatedDate,"dd MMM, yyyy")||"N/A"),u.Ab(15),u.Db("mr-1 fas fa-toggle-",i.isActiveColctn?"off text-primary":"on text-success","")}}function I(c,t){if(1&c&&(u.Tb(0,"tbody"),u.Kc(1,O,46,10,"tr",61),u.Sb()),2&c){const c=u.ic(2);u.Ab(1),u.pc("ngForOf",c.colctnArr)}}function D(c,t){1&c&&(u.Tb(0,"div",53),u.Mc(1," No Collections Found "),u.Sb())}function x(c,t){if(1&c){const c=u.Ub();u.Tb(0,"div",54),u.Tb(1,"table",55),u.Tb(2,"thead"),u.Tb(3,"tr"),u.Tb(4,"th",56),u.Tb(5,"mat-checkbox",57),u.ec("change",(function(t){return u.Bc(c),u.ic().selAll(t.checked)})),u.Sb(),u.Sb(),u.Kc(6,w,3,5,"th",58),u.Ob(7,"th",56),u.Sb(),u.Sb(),u.Kc(8,I,2,1,"tbody",10),u.Sb(),u.Kc(9,D,2,0,"div",59),u.Sb()}if(2&c){const c=u.ic();u.Ab(6),u.pc("ngForOf",c.cols),u.Ab(2),u.pc("ngIf",c.colctnArr.length>0&&!c.loading),u.Ab(1),u.pc("ngIf",0==c.colctnArr.length&&!c.loading)}}function $(c,t){1&c&&u.Ob(0,"app-loader",69),2&c&&u.pc("type","page")}function N(c,t){if(1&c){const c=u.Ub();u.Tb(0,"app-sel-itm-fxd-div",70),u.ec("actDeact",(function(){return u.Bc(c),u.ic().actDeactColctn(void 0)}))("clrSelData",(function(){return u.Bc(c),u.ic().clrSel()})),u.Sb()}if(2&c){const c=u.ic();u.pc("selArr",c.selColctnArr)("isActive",1==c.activeColctn)("type","collection")}}const F=function(c,t){return{"fa-list-ul":c,"fa-th-large":t}};let B=(()=>{class c{constructor(c,t,i,n,e){this.modalService=c,this.colctnSrv=t,this.toastr=i,this.dialog=n,this.router=e,this.fldrIcon=b.f}ngOnInit(){this.initialiseState(),this.listColctn()}initialiseState(){this.view=!0,this.disabled=!1,this.loading=!0,this.colctnArr=[],this.selColctnArr=[],this.multiForm=0,this.cols=[{n:"Name",asc:!1,k:"name"},{n:"Date Modified",asc:!1,k:"updatedDate"}],this.activeColctn=1}showContent(c){this.router.navigate(["/web-app/resource/collections/"+c])}sortChange(c,t){let i=Object.assign({},c);for(let n=0;n<this.cols.length;n++)this.cols[n].asc=!1;i.asc=!i.asc,this.cols[t].asc=i.asc,this.colctnArr=this.colctnArr.sort((t,n)=>"name"===c.k?t.name.toLowerCase()<n.name.toLowerCase()?i.asc?-1:1:i.asc?1:-1:t.updatedDate.toLowerCase()<n.updatedDate.toLowerCase()?i.asc?-1:1:i.asc?1:-1)}selMe(c,t){c?this.selColctnArr.push(t):this.selColctnArr=this.selColctnArr.filter(c=>c!=t)}clrSel(){this.selColctnArr=[],this.colctnArr=this.colctnArr.map(c=>Object.assign(Object.assign({},c),{chk:!1}))}selAll(c){c?(this.selColctnArr=this.colctnArr,this.colctnArr=this.colctnArr.map(c=>Object.assign(Object.assign({},c),{chk:!0}))):this.clrSel()}actDeactColctn(c){let t=c?[c]:this.selColctnArr,i=1==t.length?"":"s",n=1==this.activeColctn?"deactivate":"activate";this.dialog.open(r.a,{data:{msg:`Are you sure you want to ${n} ${1==t.length?"this":"these"} collection${i}?`,title:`${1==this.activeColctn?"Deactivate":"Activate"} collection${i}`},autoFocus:!1}).afterClosed().subscribe(c=>{c&&this.colctnSrv.actDeactColctn(t,1!=this.activeColctn).subscribe(c=>{c?(this.toastr.success(`Collection${i} ${n}d successfully`,"Success!"),this.selColctnArr=[],this.listColctn()):this.toastr.error(`Unable to ${n} collection${i}`,"Error!")},c=>{})})}listColctn(){this.loading=!0,this.selColctnArr=[],this.colctnSrv.colctnList({pageNo:0,sortColumn:"updatedDate",isAscending:!1,isActive:1==this.activeColctn}).subscribe(c=>{this.colctnArr=c&&c.result&&Array.isArray(c.result.results)&&c.result.results.length>0?c.result.results.map(c=>Object.assign(Object.assign({},c),{chk:!1})):[],this.loading=!1},c=>{this.colctnArr=[],this.loading=!1})}openModal(c){this.modalService.open(c,{size:"lg"}).result.then(c=>{},c=>{})}cmnModal(c,t,i){if("email"==c){const c=this.modalService.open(d.a,{size:"lg"});c.componentInstance.type="collection",c.componentInstance.data=i}else if("getLink"==c){const c=this.modalService.open(p.a,{size:"lg"});c.componentInstance.type="collection",c.componentInstance.data=i}else if("coll"==c){const c=this.modalService.open(f.a,{size:"lg"});c.componentInstance.colctn=i,c.componentInstance.type=t,c.result.then(c=>{if(c)if("ren"==t)for(let t=0;t<this.colctnArr.length;t++)this.colctnArr[t].id==i.id&&(this.colctnArr[t].name=c.name);else this.listColctn()})}}dismissModal(){this.modalService&&this.modalService.dismissAll()}ngOnDestroy(){this.dismissModal()}}return c.\u0275fac=function(t){return new(t||c)(u.Nb(s.f),u.Nb(m.a),u.Nb(h.b),u.Nb(a.b),u.Nb(e.d))},c.\u0275cmp=u.Hb({type:c,selectors:[["app-collection-list"]],decls:20,vars:13,consts:[[1,"main","main-employee","p-3","container","mt-3"],[1,"mb-2","clearfix","heading","align-self-center"],[1,"float-right"],[1,"fa","mr-3","curs-ptr","align-self-center",3,"ngClass","matTooltip","click"],[1,"btn","btn-primary","mb-2",3,"click"],["class","text-right mb-2",4,"ngIf"],["ngbNav","",1,"nav-tabs","justify-content-end","border-bottom","border-color-grey","mr-3","w-100","pr-2",3,"activeId","activeIdChange"],["fldrNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[4,"ngIf"],["class","row collections",4,"ngIf"],[3,"type",4,"ngIf"],[3,"selArr","isActive","type","actDeact","clrSelData",4,"ngIf"],[1,"text-right","mb-2"],["class","text-primary ml-2 curs-ptr",3,"click",4,"ngFor","ngForOf"],[1,"text-primary","ml-2","curs-ptr",3,"click"],[1,"fa","ml-1",3,"ngClass"],[4,"ngIf","ngIfElse"],["noColctn",""],[1,"mt-2","row","collections"],["class","card-container col-lg-3 col-md-4 col-sm-6 my-3",4,"ngFor","ngForOf"],[1,"card-container","col-lg-3","col-md-4","col-sm-6","my-3"],[1,"card","mx-auto"],[1,"card-body","curs-ptr",3,"click"],[3,"src"],[1,"card-footer"],[1,"name","text-truncate"],[1,"float-left","text-secondary","d-flex"],[1,"date"],[1,"mx-2"],[1,"items"],[3,"checked","change"],[1,"options","rounded"],[1,"dropleft"],["type","button","id","shareDD","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn"],[1,"fas","fa-share-square"],["aria-labelledby","shareDD",1,"dropdown-menu"],[1,"dropdown-item","curs-ptr",3,"click"],[1,"fa","fa-envelope","mr-1"],[1,"fa","fa-link","mr-1"],[1,"btn","my-1",3,"click"],["type","button","id","optionsDD","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn"],[1,"fas","fa-ellipsis-h"],["aria-labelledby","optionsDD",1,"dropdown-menu"],[1,"fas","fa-copy","mr-1"],[1,"fas","fa-edit","mr-1"],[1,"dropdown-item","dd"],[1,"fa","fa-download","mr-1"],[1,"dropdown-menu"],[1,"dropdown-item"],[1,"fas","fa-file-pdf","mr-1"],[1,"fas","fa-file-alt","mr-1"],[1,"mx-auto","mt-5","text-secondary",2,"font-size","20px"],[1,"row","collections"],[1,"table","table-hover"],[1,"border-top-0"],[3,"change"],["class","border-top-0 curs-ptr",3,"click",4,"ngFor","ngForOf"],["class","mx-auto mt-5 text-secondary","style","font-size: 20px;",4,"ngIf"],[1,"border-top-0","curs-ptr",3,"click"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"align-middle","curs-ptr",3,"click"],[1,"d-flex"],[1,"imagePreview","border","mr-2"],[1,"name","align-self-center"],[1,"align-middle","options"],[1,"btn",3,"click"],[3,"type"],[3,"selArr","isActive","type","actDeact","clrSelData"]],template:function(c,t){1&c&&(u.Tb(0,"div",0),u.Tb(1,"h3",1),u.Mc(2," Collections "),u.Tb(3,"div",2),u.Tb(4,"i",3),u.ec("click",(function(){return t.view=!t.view})),u.Sb(),u.Tb(5,"button",4),u.ec("click",(function(){return t.cmnModal("coll","add")})),u.Mc(6,"New Collection"),u.Sb(),u.Sb(),u.Sb(),u.Kc(7,T,3,1,"div",5),u.Tb(8,"ul",6,7),u.ec("activeIdChange",(function(c){return t.activeColctn=c}))("activeIdChange",(function(){return t.listColctn()})),u.Tb(10,"li",8),u.Tb(11,"a",9),u.Mc(12,"Active"),u.Sb(),u.Sb(),u.Tb(13,"li",8),u.Tb(14,"a",9),u.Mc(15,"Disabled"),u.Sb(),u.Sb(),u.Sb(),u.Kc(16,y,4,2,"ng-container",10),u.Kc(17,x,10,3,"div",11),u.Kc(18,$,1,1,"app-loader",12),u.Sb(),u.Kc(19,N,1,3,"app-sel-itm-fxd-div",13)),2&c&&(u.Ab(4),u.qc("matTooltip",t.view?"List View":"Grid View"),u.pc("ngClass",u.uc(10,F,t.view,!t.view)),u.Ab(3),u.pc("ngIf",t.view),u.Ab(1),u.pc("activeId",t.activeColctn),u.Ab(2),u.pc("ngbNavItem",1),u.Ab(3),u.pc("ngbNavItem",2),u.Ab(3),u.pc("ngIf",t.view&&!t.loading),u.Ab(1),u.pc("ngIf",!t.view),u.Ab(1),u.pc("ngIf",t.loading),u.Ab(1),u.pc("ngIf",t.selColctnArr.length>0))},directives:[n.k,l.a,n.m,s.h,s.i,s.j,n.l,o.a,g.a,v.a],pipes:[n.e],styles:[""]}),c})();var K=i("zJym"),L=i("Amnm"),j=i("IpHC"),z=i("3Pt+"),P=i("kmnG"),U=i("qFsG"),E=i("j+Cn");let G=(()=>{class c{}return c.\u0275mod=u.Lb({type:c}),c.\u0275inj=u.Kb({factory:function(t){return new(t||c)},providers:[E.a],imports:[[n.c,z.h,z.s,P.e,U.c,K.a]]}),c})();var Q=i("u7Mw");const q=[{path:"",component:B}];let J=(()=>{class c{}return c.\u0275mod=u.Lb({type:c}),c.\u0275inj=u.Kb({factory:function(t){return new(t||c)},providers:[m.a],imports:[[n.c,e.h.forChild(q),o.b,l.b,K.a,a.e,s.k,L.a,j.a,G,Q.a]]}),c})()}}]);