(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{FScs:function(t,e,n){"use strict";n.r(e),n.d(e,"TestModule",(function(){return u}));var i=n("ofXK"),s=n("3Pt+"),o=n("tyNb"),r=n("lRFz"),a=n("fXoL"),d=n("dtd+"),h=n("tk/3"),c=n("lJxs"),l=n("aZQB");let p=(()=>{class t{constructor(t){this.http=t}annotList(t){let e=new h.e;for(let n in t)(t[n]||"pageNo"==n)&&(e=e.set(n,t[n]));return this.http.get(""+l.a.LIST_ANNOT,{params:e}).pipe(Object(c.a)(t=>t))}addAnnot(t){return this.http.put(""+l.a.ADD_ANNOT,t)}}return t.\u0275fac=function(e){return new(e||t)(a.bc(h.b))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac}),t})();const g=[{path:"",component:(()=>{class t{constructor(t,e,n){this.viewSDKClient=e,this.annotServ=n,this.pdfURL="",this.cont="",this.auth="",this.goTo=0,this.handlePages=t=>{this.getPageID();let e=t.getViewport({scale:1});const n=this.document.querySelector("#"+this.getPageID("canv"));n.style.display="block";var i=n.getContext("2d");n.height=e.height,n.width=e.width,t.render({canvasContext:i,viewport:e}).then(()=>{})},this.document=t,r.GlobalWorkerOptions.workerSrc="assets/pdfjs/pdf.worker.min.js"}ngOnInit(){this.annotList()}initializeState(){this.currPage=1,this.totalPages=0,this.pdfRef=null,this.pdfFactory=null,this.coordinates=[0,0],this.doCircle=!1}ngAfterViewInit(){}annotList(){this.annotData=[],this.annotServ.annotList({}).subscribe(t=>{if(t&&Array.isArray(t.result)&&t.result.length>0)for(let e=0;e<t.result.length;e++)this.annotData.push(JSON.parse(t.result[e].annotationData))},t=>{})}renderPDf2(){this.viewSDKClient.ready().then(()=>{this.document.querySelector("#pdf-div").style.display="block",this.viewSDKClient.previewFile({defConfg:{enableAnnotationAPIs:!0,showDownloadPDF:!1,showLeftHandPanel:!1,showPrintPDF:!1},name:"my file",divId:"pdf-div",url:this.pdfURL},this.annotData)})}clearPdfRef(){this.pdfRef&&(this.pdfRef.cleanup(),this.pdfRef.destroy())}gotoPage(){this.viewSDKClient.goToPage(parseInt(this.goTo))}pdfRender(){this.initializeState(),r.getDocument({url:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"}).promise.then(t=>{this.pdfRef=t,this.totalPages=t.numPages,console.log(t.numPages,"pdf.numPages;"),t.getPage(1).then(this.handlePages)})}getPageID(t="page"){return t+"-d-"+(this.currPage-1)}getPage(t){this.currPage&&this.pdfRef&&("prev"===t?this.currPage--:this.currPage++,this.document.getElementById(this.getPageID()).hasChildNodes()||this.pdfRef.getPage(this.currPage).then(this.handlePages))}counter(t){return new Array(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(i.d),a.Nb(d.a),a.Nb(p))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-test"]],decls:12,vars:2,consts:[["type","text",3,"ngModel","ngModelChange"],[3,"click"],[1,"row"],[1,"col-md-12"],["id","pdf-div",1,"pdf-view",2,"display","none"]],template:function(t,e){1&t&&(a.Tb(0,"p"),a.Mc(1,"test works!"),a.Sb(),a.Mc(2,"PDF URL "),a.Tb(3,"input",0),a.ec("ngModelChange",(function(t){return e.pdfURL=t})),a.Sb(),a.Tb(4,"button",1),a.ec("click",(function(){return e.renderPDf2()})),a.Mc(5,"Render PDF"),a.Sb(),a.Tb(6,"input",0),a.ec("ngModelChange",(function(t){return e.goTo=t})),a.Sb(),a.Tb(7,"button",1),a.ec("click",(function(){return e.gotoPage()})),a.Mc(8,"Go TO"),a.Sb(),a.Tb(9,"div",2),a.Tb(10,"div",3),a.Ob(11,"div",4),a.Sb(),a.Sb()),2&t&&(a.Ab(3),a.pc("ngModel",e.pdfURL),a.Ab(3),a.pc("ngModel",e.goTo))},directives:[s.c,s.m,s.p],styles:[".page[_ngcontent-%COMP%]{border:1px solid #000;position:relative}#sheet-container[_ngcontent-%COMP%]{width:400px;height:400px;border:1px solid #000}.pdf-view[_ngcontent-%COMP%]{margin:5% auto auto;height:90vh;width:900px;border:1px solid #dadada}#canvas-id[_ngcontent-%COMP%]{height:700px;width:700px}"]}),t})()}];let u=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},providers:[p],imports:[[i.c,o.h.forChild(g),s.h]]}),t})()}}]);