<div class="content-workspace">
  <div class="buttons-row row mt-3 justify-content-between mx-2">
    <div class="dropdown">
      <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="addContentDD" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Add Content
      </button>
      <div class="dropdown-menu" aria-labelledby="addContentDD">
        <a class="dropdown-item curs-ptr" (click)="openModal(uploadFile, 'uplFile')">
          <i class="fas fa-file-alt mr-1"></i>
          Upload Files
        </a>
        <a class="dropdown-item curs-ptr" (click)="openModal(addUrl, 'addUrl')">
          <i class="fas fa-link mr-1"></i>
          Add a URL
        </a>
      </div>
    </div>
    <div class="btn btn-primary btn-sm float" (click)="workspaceToggle()">
      <i class="fas fa-chevron-right mr-1"></i>Workspace
    </div>
  </div>
  <div class="row mt-4 mx-0">
    <div class="sub-tab-nav"
      [ngClass]="{'col-md-12': !showRowInfo && !showWork, 'col-md-0 col-lg-6': showRowInfo || showWork}">
      <div class="card overflow-hidden">
        <div class="card-header border-0">
          <mat-tab-group (selectedTabChange)="onTabChange($event)">
            <mat-tab label="All">
              <div class="card-body bg-white rounded-bottom px-0 pb-0">
                <ng-container *ngTemplateOutlet="srcHdrTxt"></ng-container>
                <app-loader [type]="'page'" *ngIf="cntntLoading"></app-loader>
                <ng-container *ngTemplateOutlet="cntntTable"></ng-container>
              </div>
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <span>Processing</span>
                <ng-container *ngIf="procCnt>0">
                  &nbsp;{{procCnt}}&nbsp;<app-loader [type]="'btn-red'"></app-loader>
                </ng-container>
              </ng-template>
              <div class="card-body bg-white rounded-bottom px-0 pb-0">
                <app-loader [type]="'page'" *ngIf="cntntLoading"></app-loader>
                <ng-container *ngTemplateOutlet="cntntTable"></ng-container>
              </div>
            </mat-tab>
            <mat-tab label="Trash">
              <div class="card-body bg-white rounded-bottom px-0 pb-0">
                <ng-container *ngTemplateOutlet="srcHdrTxt"></ng-container>
                <app-loader [type]="'page'" *ngIf="cntntLoading"></app-loader>
                <ng-container *ngTemplateOutlet="cntntTable"></ng-container>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </div>
    <div class="workspace-container col-12 col-lg-6" *ngIf="showRowInfo || showWork">
      <div class="document" *ngIf="showRowInfo">
        <app-loader [type]="'page'" *ngIf="docLoading"></app-loader>
        <div class="card" *ngIf="!docLoading">
          <div class="card-header row m-0">
            <h5 class="mb-0 pt-1 col-10 pl-0 align-self-center">
              {{rowInfo.name}}
            </h5>
            <div class="mr-2 col-1 ml-auto">
              <div class="btn btn-light" (click)="closeDoc()">
                <i class="fas fa-times"></i>
              </div>
            </div>
          </div>
          <div class="card-title d-flex bg-hi-grey p-2 border-bottom">
            <div class="btn btn-light btn-sm ml-auto mr-2"><i class="fas fa-chart-line mr-1"></i>Analytics</div>
            <div class="dropdown">
              <button class="btn btn-light btn-sm" type="button" id="optDD" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="fas fa-ellipsis-h"></i>
              </button>
              <div class="dropdown-menu" aria-labelledby="optDD">
                <ng-container *ngIf="activeIndex==0">
                  <a class="dropdown-item curs-ptr" (click)="openModal(uplNewVer, 'newVer')">
                    <i class="fas fa-upload mr-1"></i>Upload new version
                  </a>
                  <a class="dropdown-item curs-ptr" *ngIf="rowInfo.contentPath" (click)="downloadFile()">
                    <i class="fas fa-download mr-1"></i>Download
                  </a>
                </ng-container>
                <a class="dropdown-item curs-ptr" (click)="updCntntStatus();">
                  <span *ngIf="activeIndex==0"><i class="fas fa-trash mr-1"></i>Move to trash</span>
                  <span *ngIf="activeIndex==2"><i class="fas fa-trash-restore mr-1"></i>Restore</span>
                </a>
                <a class="dropdown-item curs-ptr" (click)="updCntntStatus(true);" *ngIf="activeIndex==2">
                  <i class="fas fa-trash mr-1"></i>Permanently delete
                </a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="discription row">
              <div class="col-6 text-center">
                <img [src]="rowInfo.img" alt="Thumbnail">
              </div>
              <div class="col-6 align-self-center text-hi-dark work-div dark-bg-hover rounded p-2">
                <h6 class="font-weight-bold">
                  Description
                  <a class="float-right text-hi-dark-grey" *ngIf="!edits.d" (click)="openEdit('d')">
                    <i class=" fas fa-edit"></i>
                  </a>
                </h6>
                <div class="view" *ngIf="!edits.d">
                  <p class="disc-text">{{rowInfo.description||'No Description'}}</p>
                </div>
                <div class="edit" *ngIf="edits.d">
                  <div>
                    <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                      [floatLabel]="'never'">
                      <input matInput placeholder="Description" [(ngModel)]="desc" name="desc" class="ml-0">
                    </mat-form-field>
                    <div class="form-group text-right">
                      <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('d')">Cancel</button>
                      <button class="btn btn-primary btn-sm" [disabled]="disb.d" (click)="updContent('d')">
                        <app-loader [type]="'btn'" *ngIf="disb.d"></app-loader>Submit
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="workspace-nav mt-5">
              <mat-tab-group>
                <mat-tab label="Properties">
                  <div class="properties row mx-0">
                    <div class="col-5 mt-3">
                      <div class="tags work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Tags
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.t" (click)="openEdit('t')">
                            <i class=" fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.t">
                          <div *ngIf="rowInfo.contentTags && rowInfo.contentTags.length>0 else noCntntTag">
                            <span *ngFor="let tg of rowInfo.contentTags"
                              class="badge badge-light text-success text-wrap m-1 text-break">{{tg.tagName}}</span>
                          </div>
                          <ng-template #noCntntTag>
                            <div class="text-hi-dark-grey">No Tags</div>
                          </ng-template>
                        </div>
                        <div class="edit" *ngIf="edits.t">
                          <div>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white">
                              <mat-chip-list aria-label="Select tags">
                                <mat-chip *ngFor="let d of selTags2" [selectable]="selectable" [removable]="removable"
                                  (removed)="remove(d,'selTags2')">
                                  {{d.name}}
                                  <i matChipRemove class="fas fa-times-circle" *ngIf="removable"></i>
                                </mat-chip>
                                <input matInput #cntInfoInp [(ngModel)]="cntntInfoTag" name="cntntInfoTag"
                                  placeholder="Select tags" [matAutocomplete]="autoT">
                              </mat-chip-list>
                              <mat-autocomplete #autoT="matAutocomplete"
                                (optionSelected)="selFromAutoComp($event.option.value,'selTags2',cntInfoInp)"
                                [displayWith]="displayFn">
                                <mat-option *ngFor="let tg of tags|filterName: cntntInfoTag: 'name'" [value]="tg">
                                  {{tg.name}}
                                </mat-option>
                              </mat-autocomplete>
                            </mat-form-field>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('t')">Cancel</button>
                              <button class="btn btn-primary btn-sm" [disabled]="disb.t" (click)="updContent('t')">
                                <app-loader [type]="'btn'" *ngIf="disb.t"></app-loader>Submit
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="language work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Language
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.l" (click)="openEdit('l')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.l">
                          <div *ngIf="rowInfo.contentLanguages && rowInfo.contentLanguages.length>0 else noCntntLng">
                            <span *ngFor="let lng of rowInfo.contentLanguages"
                              class="badge badge-light text-success">{{lng.languageName}}</span>
                          </div>
                          <ng-template #noCntntLng>
                            <div class="text-hi-dark-grey">No Languages</div>
                          </ng-template>
                        </div>
                        <div class="edit" *ngIf="edits.l">
                          <div>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white">
                              <mat-chip-list aria-label="Select Languages">
                                <mat-chip *ngFor="let d of selLngs" [selectable]="selectable" [removable]="removable"
                                  (removed)="remove(d,'selLngs')">
                                  {{d.name}}
                                  <i matChipRemove class="fas fa-times-circle" *ngIf="removable"></i>
                                </mat-chip>
                                <input matInput #lngInp [(ngModel)]="cntntLng" name="cntntLng"
                                  placeholder="Select Languages" [matAutocomplete]="autoL">
                              </mat-chip-list>
                              <mat-autocomplete #autoL="matAutocomplete"
                                (optionSelected)="selFromAutoComp($event.option.value,'selLngs',lngInp)"
                                [displayWith]="displayFn">
                                <mat-option *ngFor="let lng of lngs|filterName: cntntLng: 'name'" [value]="lng">
                                  {{lng.name}}
                                </mat-option>
                              </mat-autocomplete>
                            </mat-form-field>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('l')">Cancel</button>
                              <button class="btn btn-primary btn-sm" [disabled]="disb.l" (click)="updContent('l')">
                                <app-loader [type]="'btn'" *ngIf="disb.l"></app-loader>Submit
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="country work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Country
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.c" (click)="openEdit('c')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.c">
                          <div class="text-hi-dark-grey">No Country</div>
                        </div>
                        <div class="edit" *ngIf="edits.c">
                          <div>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                              [floatLabel]="'never'">
                              <input matInput placeholder="Country" class="ml-0">
                            </mat-form-field>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('c')">Cancel</button>
                              <button class="btn btn-primary btn-sm">Submit</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="author work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Author
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.a" (click)="openEdit('a')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.a">
                          <div class="text-hi-dark-grey">
                            Andrea D'Souza
                          </div>
                        </div>
                        <div class="edit" *ngIf="edits.a">
                          <div>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                              [floatLabel]="'never'">
                              <input matInput placeholder="Author" class="ml-0">
                            </mat-form-field>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('a')">Cancel</button>
                              <button class="btn btn-primary btn-sm">Submit</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="availibility work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Availibility
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.av" (click)="openEdit('av')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.av">
                          <div class="text-hi-dark-grey">
                            Released : Yes<br />
                            Expired : Never
                          </div>
                        </div>
                        <div class="edit" *ngIf="edits.av">
                          <div>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                              [floatLabel]="'never'">
                              <input matInput placeholder="Released" class="ml-0">
                            </mat-form-field>
                            <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                              [floatLabel]="'never'">
                              <input matInput placeholder="Expired" class="ml-0">
                            </mat-form-field>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('av')">Cancel</button>
                              <button class="btn btn-primary btn-sm">Submit</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-7 mt-3">
                      <div class="permissions work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Permissions
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.p" (click)="openEdit('p')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.p">
                          <div class="text-hi-dark-grey">
                            <ul class="list-unstyled">
                              <li>
                                <i [ngClass]="{'fa-check': rowInfo.canBeShared,'fa-times': !rowInfo.canBeShared}"
                                  class="mr-1 fas"></i>
                                Can be shared
                              </li>
                              <li *ngIf="rowInfo.contentType==3">
                                <i [ngClass]="{'fa-check': rowInfo.hideLabelInWorkspace,'fa-times': !rowInfo.hideLabelInWorkspace}"
                                  class="mr-1 fas"></i>
                                Hide Label in Workspace
                              </li>
                              <!-- <li><i class="fas fa-check mr-1"></i>Can be downloaded</li>
                              <ul class="list-unstyled ml-3">
                                <li><i class="fas fa-check mr-1"></i>Internally</li>
                                <li><i class="fas fa-check mr-1"></i>Externally</li>
                              </ul> -->
                            </ul>
                          </div>
                        </div>
                        <div class="edit" *ngIf="edits.p">
                          <div>
                            <ul class="list-unstyled">
                              <li>
                                <mat-checkbox [(ngModel)]="isShared" name="isShared">Can be shared</mat-checkbox>
                              </li>
                              <li *ngIf="rowInfo.contentType==3">
                                <mat-checkbox [(ngModel)]="hLW" name="hLW">Hide Label in Workspace</mat-checkbox>
                              </li>
                              <!-- <li class="ml-2">
                                <div class="row">
                                  <div class="col-5 pr-0">
                                    <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                                      [floatLabel]="'never'">
                                      <mat-select placeholder="Page">
                                        <mat-option hidden selected></mat-option>
                                        <mat-option value="1">1</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-5 pr-0">
                                    <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                                      [floatLabel]="'never'">
                                      <mat-select placeholder="Page">
                                        <mat-option hidden selected></mat-option>
                                        <mat-option value="1">1</mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-2 align-self-center">
                                    <i class="fas fa-times"></i>
                                  </div>
                                </div>
                              </li>
                              <li class="ml-2">
                                <a href="javascript:void(0)"><i class="fas fa-plus mr-1"></i>Add another</a>
                              </li> -->
                            </ul>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('p')">Cancel</button>
                              <button class="btn btn-primary btn-sm" [disabled]="disb.p" (click)="updContent('p')">
                                <app-loader [type]="'btn'" *ngIf="disb.p"></app-loader>Submit
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="optimization work-div dark-bg-hover rounded p-2">
                        <div class="font-weight-bold mb-1">
                          Optimization
                          <a class="float-right text-hi-dark-grey" *ngIf="!edits.o" (click)="openEdit('o')">
                            <i class="fas fa-edit"></i>
                          </a>
                        </div>
                        <div class="view" *ngIf="!edits.o">
                          <div class="text-hi-dark-grey">
                            Use Optimized File : Yes
                          </div>
                        </div>
                        <div class="edit" *ngIf="edits.o">
                          <div>
                            <mat-checkbox>Use Optimized File</mat-checkbox>
                            <div class="form-group text-right">
                              <button class="btn btn-secondary btn-sm mr-2" (click)="closeEdit('o')">Cancel</button>
                              <button class="btn btn-primary btn-sm">Submit</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </mat-tab>
                <mat-tab label="Info">
                  <div class="info">
                    <div class="row mx-0">
                      <div class="col-6">
                        <div class="history mt-3 work-div dark-bg-hover rounded p-2">
                          <div class="font-weight-bold mb-1">
                            History
                          </div>
                          <div class="view">
                            <div class="text-hi-dark-grey">
                              Added : 04-11-2018<br />
                              Last Upload : 04-11-2020<br />
                              Last Updated : 29-09-2020
                            </div>
                          </div>
                        </div>
                        <div class="crm mt-3 work-div dark-bg-hover rounded p-2">
                          <div class="font-weight-bold mb-1">
                            CRM Recommendations
                          </div>
                          <div class="view">
                            <div class="text-hi-dark-grey">
                              No CRM Recommendations
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="experiences mt-3 work-div dark-bg-hover rounded p-2">
                          <div class="font-weight-bold mb-1">
                            Used in Experiences
                          </div>
                          <div class="view">
                            <div class="text-hi-dark-grey">
                              Stock
                            </div>
                          </div>
                        </div>
                        <div class="extId mt-3 work-div dark-bg-hover rounded p-2">
                          <div class="font-weight-bold mb-1">
                            External ID
                            <a class="float-right text-hi-dark-grey" *ngIf="!edits.e" (click)="openEdit('e')">
                              <i class=" fas fa-edit"></i>
                            </a>
                          </div>
                          <div class="view" *ngIf="!edits.e">
                            <div class="text-hi-dark-grey">
                              No external ID
                            </div>
                          </div>
                          <div class="edit" *ngIf="edits.e">
                            <form>
                              <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                                [floatLabel]="'never'">
                                <input matInput placeholder="External ID" class="ml-0">
                              </mat-form-field>
                              <div class="form-group text-right">
                                <button type="reset" class="btn btn-secondary btn-sm mr-2"
                                  (click)="closeEdit('e')">Cancel</button>
                                <button type="submit" class="btn btn-primary btn-sm">Submit</button>
                              </div>
                            </form>
                          </div>
                        </div>
                        <!-- Phase 2 <div class="appLink mt-3 work-div dark-bg-hover rounded p-2">
                          <div class="font-weight-bold mb-1">
                            App Link
                          </div>
                          <div class="view">
                            <div class="text-hi-dark-grey">
                              showpad://abc/sabcbibicbiecbei875
                            </div>
                          </div>
                        </div> -->
                      </div>
                    </div>
                  </div>
                </mat-tab>
                <mat-tab label="Comments">
                  <div class="comments">
                    <div class="file-comment row pl-3 mt-3 mx-0" *ngFor="let cmnt of rowInfo.comments">
                      <div class="col-2 col-sm-1 align-self-center p-0">
                        <div class="dp"><i class="fa fa-user-circle"></i></div>
                      </div>
                      <div class="col-10 col-sm-11 p-0">
                        <div class="user-name d-flex">
                          {{cmnt.createdByFullName}}
                          <div class="date ml-auto text-hi-grey">{{(cmnt.createdDate|date:'dd MMM, yyyy')||'N/A'}}</div>
                        </div>
                        <div class="comment text-hi-dark-grey">{{cmnt.commentText||'N/A'}}</div>
                      </div>
                    </div>
                    <div class="add-comment mt-4">
                      <mat-form-field appearance="outline" class="custom-mat-input w-100 my-2 bg-white"
                        [floatLabel]="'never'">
                        <input matInput placeholder="Write a comment..." [(ngModel)]="cmnt" name="cmnt" class="ml-0"
                          maxlength="500" required />
                        <i matSuffix class="fa fa-angle-double-right curs-ptr"></i>
                      </mat-form-field>
                      <div class="form-group text-right">
                        <button [disabled]="disb.cmnt || !cmnt" (click)="addCmnt('cmnt')"
                          class="btn btn-primary text-white btn-sm">
                          <app-loader [type]="'btn'" *ngIf="disb.cmnt"></app-loader>Submit
                        </button>
                      </div>
                    </div>
                  </div>
                </mat-tab>
              </mat-tab-group>
            </div>
          </div>
        </div>
      </div>
      <div class="worksp" *ngIf="showWork">
        <div class="card">
          <div class="card-header row m-0">
            <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="wrkspcDD" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" (click)="loadWrkspcs()">
                {{selWrkspc ? selWrkspc.name : 'Select a Workspace'}}
              </button>
              <div class="dropdown-menu overflow-hidden" aria-labelledby="wrkspcDD">
                <ul ngbNav #fldrNav="ngbNav" [(activeId)]="activeWrkspc"
                  class="nav-tabs justify-content-end border-bottom mr-3 w-100 pr-2"
                  (activeIdChange)="changeDispWrkspc()" (click)="$event.stopPropagation();">
                  <li [ngbNavItem]="1"><a ngbNavLink (click)="$event.stopPropagation();">Active</a></li>
                  <li [ngbNavItem]="2"><a ngbNavLink (click)="$event.stopPropagation();">Disabled</a></li>
                </ul>
                <ng-container *ngIf="wrkspcLoading; else noLoading">
                  <app-loader [type]="'div'"></app-loader>
                </ng-container>
                <ng-template #noLoading>
                  <ng-container *ngIf="wrkspcs.length>0; else noWrkspc">
                    <div class="overflow-auto" style="max-height:130px">
                      <a class="dropdown-item curs-ptr" [ngClass]="{'active': selWrkspc == ws}"
                        (click)="selectWrkspc(ws)" *ngFor="let ws of wrkspcs">
                        {{ws.name}}
                      </a>
                    </div>
                  </ng-container>
                  <ng-template #noWrkspc>
                    <div class="text-secondary text-center">
                      No workspaces found
                    </div>
                  </ng-template>
                </ng-template>
                <div class="dropdown-divider my-0"></div>
                <a class="dropdown-item curs-ptr" (click)="openModal(addWorkspace)">Create a new Workspace</a>
              </div>
            </div>
            <div class="ml-auto mr-2">
              <div class="btn btn-light" (click)="closeDoc(true)">
                <i class="fas fa-times"></i>
              </div>
            </div>
          </div>
          <div class="card-header bg-hi-light-grey py-1 px-2 row m-0">
            <div class="dropdown rounded mr-2">
              <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="btnAddDD" data-toggle="dropdown"
                [disabled]="!selWrkspc || (dispFolder && dispFolder.entityType==2)">
                Add
              </button>
              <div class="dropdown-menu" aria-labelledby="btnAddDD">
                <a class="dropdown-item curs-ptr" (click)="openFolderModal(folderModal, 'add')">Add Folder</a>
                <a class="dropdown-item curs-ptr" (click)="openFolderModal(smartFolderModal, 'add')">Add Smart
                  Folder</a>
              </div>
            </div>
            <div class="dropdown rounded">
              <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="btnUsersDD" data-toggle="dropdown"
                [disabled]="!selWrkspc">
                Users <span class="badge badge-light"
                  *ngIf="!selUsrGrpLoad && selUsrGrpWrkspc">{{selUsrGrpWrkspc.length}}</span>
              </button>
              <div class="dropdown-menu large-dropdown-menu py-0 overflow-hidden" aria-labelledby="btnUsersDD"
                (click)="$event.stopPropagation();">
                <div class="bg-hi-dark-grey p-2">Assign Experience Users</div>
                <div class="p-3">
                  <form>
                    <mat-form-field appearance="outline" class="custom-mat-input w-100 mb-2 px-3"
                      [floatLabel]="'never'">
                      <mat-chip-list aria-label="Select tags">
                        <mat-chip *ngFor="let d of selUsrGrps" [selectable]="selectable" [removable]="removable"
                          (removed)="remove(d,'selUsrGrps')">
                          {{d.name}}
                          <i matChipRemove class="fas fa-times-circle" *ngIf="removable"></i>
                        </mat-chip>
                        <input matInput #unSelGrpInp [(ngModel)]="unSelUsrGrpTxt" name="unSelUsrGrpTxt"
                          placeholder="Add User or Group" [matAutocomplete]="auto3">
                      </mat-chip-list>
                      <mat-autocomplete #auto3="matAutocomplete"
                        (optionSelected)="selFromAutoComp($event.option.value,'selUsrGrps',unSelGrpInp);"
                        [displayWith]="displayFn">
                        <mat-option (click)="$event.stopPropagation();"
                          *ngFor="let unUsrGpW of unSelUsrGrpWrkspc|filterName: unSelUsrGrpTxt: 'name'"
                          [value]="unUsrGpW">
                          <i class="fas mr-1"
                            [ngClass]="{'fa-user-friends': unUsrGpW.isGroup,'fa-user': !unUsrGpW.isGroup}"></i>{{unUsrGpW.name}}
                        </mat-option>
                      </mat-autocomplete>
                    </mat-form-field>
                    <div class="form-group text-right">
                      <button class="btn btn-success text-white btn-sm"
                        [disabled]="selUsrGrps.length<=0 || usrGrpWrkSpcDisb"
                        (click)="addUsrGrpInWrkspce();">Submit</button>
                    </div>
                  </form>
                  <div class="border">
                    <div class="bg-hi-light-grey row m-0 py-1">
                      <div class="col-4 align-self-center">Name</div>
                      <div class="col-8">
                        <mat-form-field appearance="outline" class="custom-mat-input w-100 mb-2 bg-white"
                          [floatLabel]="'never'">
                          <input matInput placeholder="Search User or Group" class="ml-0" [(ngModel)]="selUsrGrpTxt"
                            name="selUsrGrpTxt">
                          <i matPrefix class="fas fa-search"></i>
                        </mat-form-field>
                      </div>
                    </div>
                    <app-loader [type]="'div'" *ngIf="selUsrGrpLoad"></app-loader>
                    <div *ngIf="!selUsrGrpLoad && selUsrGrpWrkspc" class="scroll-div">
                      <ul class="list-unstyled p-2 mb-0" *ngIf="selUsrGrpWrkspc.length>0 else noSelUsrGrp">
                        <li *ngFor="let usrGpW of selUsrGrpWrkspc | filterName : selUsrGrpTxt: 'name'">
                          <i class="fas mr-1"
                            [ngClass]="{'fa-user-friends': usrGpW.isGroup,'fa-user': !usrGpW.isGroup}"></i>{{usrGpW.name}}
                          <a class="text-hi-dark float-right" (click)="remUsrGrpInWrkspce(usrGpW)"><i
                              class="fas fa-times"></i></a>
                        </li>
                      </ul>
                      <ng-template #noSelUsrGrp>
                        <div class="text-center">No User or Group in Workspace</div>
                      </ng-template>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="dropdown rounded ml-auto">
              <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="settingsDD" data-toggle="dropdown"
                [disabled]="!selWrkspc">
                <i class="fas fa-cog"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="settingsDD">
                <a class="dropdown-item curs-ptr" (click)="updWrkspcModal(editWorkspace, 'edit')">Edit</a>
                <a class="dropdown-item curs-ptr" (click)="updWrkspcModal(editWorkspace, 'dupl')">Duplicate</a>
                <a class="dropdown-item curs-ptr">Lock</a>
                <a class="dropdown-item curs-ptr">Hide from Workspace App Link</a>
                <a class="dropdown-item curs-ptr">Tag Categories</a>
                <a class="dropdown-item curs-ptr text-{{selWrkspc.isActive ? 'primary' : 'success'}}"
                  (click)="actDeactWrkspc(selWrkspc)" *ngIf="selWrkspc">
                  <i class="mr-1 fas"
                    [ngClass]="{'fa-toggle-off': selWrkspc.isActive, 'fa-toggle-on': !selWrkspc.isActive}"></i>
                  {{selWrkspc.isActive ? 'Deactivate' : 'Activate'}} Workspace
                </a>
              </div>
            </div>
          </div>
          <ng-container *ngIf="selWrkspc; else noWrkspc">
            <div class="card-body">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white mb-0 p-0">
                  <li class="breadcrumb-item curs-ptr text-primary" (click)="backFolder()" style="font-size: 16px;"
                    *ngIf="folderNav.length>0"><i class="fa fa-arrow-left align-self-center"></i></li>
                  <li class="breadcrumb-item no-before">{{selWrkspc.name}}</li>
                  <li class="breadcrumb-item" *ngFor="let folNav of folderNav">{{folNav.name}}</li>
                </ol>
              </nav>
              <ul ngbNav #fldrNav="ngbNav" [(activeId)]="activeFldrs"
                class="nav-tabs justify-content-end border-bottom-0 mr-3 w-100" (activeIdChange)="changeDispFldrs()"
                *ngIf="!dispFolder || dispFolder && dispFolder.entityType !== 2">
                <li [ngbNavItem]="1"><a ngbNavLink>Active</a></li>
                <li [ngbNavItem]="2"><a ngbNavLink>Disabled</a></li>
              </ul>
              <hr class="{{dispFolder && dispFolder.entityType === 2 ? 'mt-1-85' : 'mt-0'}}">
              <app-loader [type]="'page'" *ngIf="folderLoading"></app-loader>
              <div class="min-ht pl-0 mt-2 mb-0" cdkDropList id="fldrLists" [cdkDropListData]="wrkspcItems"
                (cdkDropListDropped)="drop($event)" *ngIf="!folderLoading">
                <div class="main row py-4" *ngIf="wrkspcItems.length > 0" dragula="wrkspc-items"
                  [(dragulaModel)]="wrkspcItems">
                  <div [ngClass]="isNotDrag()?'no-drag':''"
                    class="view-main curs-ptr my-2 p-2 col-xl-3 col-lg-4 col-md-3 col-sm-4 col-6"
                    *ngFor="let wi of wrkspcItems">
                    <ng-container *ngIf="(wi.entityType === 1 || wi.entityType === 2) else onlyCntnt">
                      <div *cdkDragPreview>
                        <img style="width:100px;height:100px" [src]="wi.imagePath?wi.imagePath:fldrIcon">
                      </div>
                      <div class="image">
                        <img [src]="wi.imagePath?wi.imagePath:fldrIcon" (click)="changeFolder(wi)">
                        <div class="dropdown" style="z-index:1;">
                          <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="comInfoDD"
                            data-toggle="dropdown">
                            <i class="fas fa-cog"></i>
                          </button>
                          <div class="dropdown-menu" aria-labelledby="comInfoDD">
                            <a class="dropdown-item curs-ptr"
                              (click)="openFolderModal(wi.entityType === 1 ? folderModal : smartFolderModal, 'edit', wi)">
                              <i class="fas fa-edit mr-1"></i>Edit {{wi.entityType === 1 ? '' : 'Smart '}}Folder
                            </a>
                            <a class="dropdown-item curs-ptr"
                              (click)="openFolderModal(wi.entityType === 1 ? folderModal : smartFolderModal, 'dupl', wi)">
                              <i class="fas fa-clone mr-1"></i>Duplicate {{wi.entityType === 1 ? '' : 'Smart '}}Folder
                            </a>
                            <!-- <a class="dropdown-item" href="javascript:void(0)">
                              <i class="fas fa-link mr-1"></i>App Link
                            </a> -->
                            <a class="dropdown-item text-{{wi.isActive ? 'primary' : 'success'}}"
                              (click)="actDeactFolder(wi)">
                              <i class="mr-1 fas"
                                [ngClass]="{'fa-toggle-off': wi.isActive, 'fa-toggle-on': !wi.isActive}"></i>
                              {{wi.isActive?'Deactivate':'Activate'}} {{wi.entityType === 1 ? '':'Smart '}}Folder
                            </a>
                            <!-- <a class="dropdown-item" href="javascript:void(0)">
                              <i class="fas fa-folder-plus mr-1"></i>Create New Channel from Folder
                            </a> -->
                          </div>
                        </div>
                      </div>
                      <div class="name bg-hi-dark-grey text-center rounded mt-2 px-2 text-truncate"
                        *ngIf="!wi.hideLabelInWorkspace" (click)="changeFolder(wi)">
                        {{wi.name}}
                      </div>
                    </ng-container>
                    <ng-template #onlyCntnt>
                      <div *cdkDragPreview>
                        <img [src]="getImg(wi)" style="width:100px;height:100px">
                      </div>
                      <div class="image">
                        <img [src]="getImg(wi)">
                        <div class="dropdown" style="z-index:1;"
                          *ngIf="!dispFolder ||(dispFolder && (dispFolder.entityType==1 || dispFolder.entityType==3))">
                          <button class="btn btn-light btn-sm dropdown-toggle" type="button"
                            (click)="delDataFromWrkspc(wi)">
                            <i class="mr-1 fas"
                              [ngClass]="{'fa-toggle-off': wi.isActive, 'fa-toggle-on': !wi.isActive}"></i>
                          </button>
                        </div>
                      </div>
                      <div class="name bg-hi-dark-grey text-center rounded mt-2 px-2 text-truncate"
                        *ngIf="!wi.hideLabelInWorkspace">
                        {{wi.name}}
                      </div>
                    </ng-template>
                  </div>
                </div>
                <div class="text-center text-secondary" style="min-height: 103px; padding-top:45px;"
                  *ngIf="wrkspcItems.length == 0">
                  No data found
                </div>
              </div>
            </div>
          </ng-container>
          <ng-template #noWrkspc>
            <div class="card-body text-center text-secondary" style="min-height: 200px; padding-top:90px;">
              No workspace selected
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #srcHdrTxt>
  <div class="card-title px-3">
    <div class="heading">
      <div class="float-right row mx-0">
        <div class="dropdown" *ngIf="view">
          <button class="btn btn-light dropdown-toggle mr-2" id="fileDD" data-toggle="dropdown">
            <i class="fas fa-cog"></i>
          </button>
          <div class="cog dropdown-menu dropdown-menu-right pt-0 overflow-hidden" aria-labelledby="fileDD"
            (click)="$event.stopPropagation();">
            <div class="scrollable py-2">
              <span class="ml-2 heading">Visible Columns</span>
              <ul cdkDropList id="cdk-vis-items" #visbList="cdkDropList" [cdkDropListData]="visbCols"
                class="min-ht pl-0 mt-2" [cdkDropListConnectedTo]="[hidList]" (cdkDropListDropped)="drop($event)">
                <button class="dropdown-item pl-2" *ngFor="let col of visbCols;let i=index" cdkDrag>
                  <span class="ellipsis mr-2">
                    <i class="fa fa-ellipsis-v"></i>
                    <i class="fa fa-ellipsis-v"></i>
                  </span>
                  <i class="text-primary fas fa-eye mr-2" (click)="showHideCols(col,'hide',i)"></i>{{col.n}}
                </button>
                <span *ngIf="visbCols.length==0" class="ml-4 text-secondary">
                  No visbible columns
                </span>
              </ul>
              <span class="ml-2 heading">Hidden Columns</span>
              <ul cdkDropList #hidList="cdkDropList" [cdkDropListData]="hidCols" class="min-ht pl-0 mt-2 mb-0"
                [cdkDropListConnectedTo]="[visbList]" (cdkDropListDropped)="drop($event)">
                <button class="dropdown-item pl-2" *ngFor="let col of hidCols;let i=index" cdkDrag>
                  <span class="ellipsis mr-2 mb-1">
                    <i class="fa fa-ellipsis-v"></i>
                    <i class="fa fa-ellipsis-v"></i>
                  </span>
                  <i class="fas fa-eye-slash mr-2" (click)="showHideCols(col,'show',i)"></i>{{col.n}}
                </button>
                <span *ngIf="hidCols.length==0" class="ml-4 text-secondary">
                  No hidden columns
                </span>
              </ul>
            </div>
            <hr class="mb-2 mt-0">
            <div class="float-right mr-2">
              <button class="btn btn-secondary btn-sm mr-2" (click)="closeDropdown($event)">Cancel</button>
              <button class="btn btn-primary btn-sm" (click)="saveHdrChngs($event)">Save</button>
            </div>
          </div>
        </div>
        <div class="btn btn-light" (click)="view = !view">
          <i class="fa" [ngClass]="{'fa-th-large': view, 'fa-list-ul' : !view}"></i>
        </div>
      </div>
      <div class="row mx-0 mb-3">
        <div class="dropdown mr-2 mb-1">
          <button class="btn btn-light dropdown-toggle" id="fileDD" data-toggle="dropdown">
            File Type
          </button>
          <div class="dropdown-menu" style="width:12rem;" aria-labelledby="fileDD" (click)="$event.stopPropagation();">
            <mat-checkbox class="dropdown-item" [checked]="ft.chk" *ngFor="let ft of cntntTypeFltr"
              (change)="addFileType($event.checked, ft,true)">
              {{ft.n}}
            </mat-checkbox>
          </div>
        </div>
        <div class="dropdown mr-2 mb-1">
          <button class="btn btn-light dropdown-toggle" id="tagsDD" data-toggle="dropdown">
            Tags
          </button>
          <div class="dropdown-menu overflow-auto px-2 tags-dd" #tagsDropDown aria-labelledby="tagsDD"
            (click)="$event.stopPropagation();">
            <mat-form-field appearance="outline" class="w-100">
              <mat-chip-list>
                <mat-chip *ngFor="let tg of allTags1" selectable removable (removed)="remove(tg,'allTags1')">
                  {{tg.name}}
                  <i matChipRemove class="fas fa-times-circle"></i>
                </mat-chip>
                <input matInput #alTg1 placeholder="Match ALL of these tags" [(ngModel)]="alTgTxt1" name="alTgTxt1"
                  [matAutocomplete]="autoAll1">
              </mat-chip-list>
              <mat-autocomplete #autoAll1="matAutocomplete"
                (optionSelected)="selFromAutoComp($event.option.value,'allTags1',alTg1)" [displayWith]="displayFn">
                <mat-option *ngFor="let tg of tags|filterName: alTgTxt1: 'name'" [value]="tg"
                  (click)="$event.stopPropagation();">
                  {{tg.name}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100">
              <mat-chip-list>
                <mat-chip *ngFor="let tg of anyTags1" selectable removable (removed)="remove(tg, 'anyTags1')">
                  {{tg.name}}
                  <i matChipRemove class="fas fa-times-circle"></i>
                </mat-chip>
                <input matInput #anTg1 placeholder="Match ANY of these tags" [(ngModel)]="anTgTxt1" name="anTgTxt1"
                  [matAutocomplete]="autoAny1">
              </mat-chip-list>
              <mat-autocomplete #autoAny1="matAutocomplete"
                (optionSelected)="selFromAutoComp($event.option.value,'anyTags1',anTg1)" [displayWith]="displayFn">
                <mat-option *ngFor="let tg of tags|filterName: anTgTxt1: 'name'" [value]="tg"
                  (click)="$event.stopPropagation();">
                  {{tg.name}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100">
              <mat-chip-list>
                <mat-chip *ngFor="let tg of noneTags1" selectable removable (removed)="remove(tg, 'noneTags1')">
                  {{tg.name}}
                  <i matChipRemove class="fas fa-times-circle"></i>
                </mat-chip>
                <input matInput #noTg1 placeholder="Match NONE of these tags" [(ngModel)]="noTgTxt1" name="noTgTxt1"
                  [matAutocomplete]="autoNone1">
              </mat-chip-list>
              <mat-autocomplete #autoNone1="matAutocomplete"
                (optionSelected)="selFromAutoComp($event.option.value,'noneTags1',noTg1)" [displayWith]="displayFn">
                <mat-option *ngFor="let tg of tags|filterName: noTgTxt1: 'name'" [value]="tg"
                  (click)="$event.stopPropagation();">
                  {{tg.name}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </div>
        <!-- <div class="dropdown mb-1">
          <button class="btn btn-light dropdown-toggle" id="authorDD" data-toggle="dropdown">
            Author
          </button>
          <div class="dropdown-menu" #authorDropDown style="width:18rem;" aria-labelledby="authorDD"
            (click)="$event.stopPropagation();">
            <mat-form-field appearance="outline" class="custom-mat-input w-100 mb-2 px-3" [floatLabel]="'never'">
              <i matPrefix class="fas fa-search"></i>
              <input matInput placeholder="Search ...">
            </mat-form-field>
            <div class="dropdown-divider"></div>
            <div class="row justify-content-around m-0">
              <button class="btn btn-light text-primary">Select all</button>
              <button class="btn btn-light">Clear all</button>
            </div>
            <div class="dropdown-divider"></div>
            <div style="max-height: 200px; overflow-y: auto;">
              <mat-checkbox class="dropdown-item">ABC (you)</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
              <mat-checkbox class="dropdown-item">def</mat-checkbox>
            </div>
            <hr class="mb-2">
            <div class="float-right mr-2">
              <button class="btn btn-secondary btn-sm mr-2" (click)="closeDropdown($event)">Cancel</button>
              <button class="btn btn-primary btn-sm">Save</button>
            </div>
          </div>
        </div> -->
      </div>
      <div class="card-title pl-2" *ngIf="filteredList.length>0">
        <span class="mr-2">Filtered by:</span>
        <div class="btn btn-outline-primary btn-sm rounded-pill filter-btn mr-2 my-1"
          *ngFor="let fltr of filteredList; let i=index">
          {{fltr.n}}<i class="ml-1 fas fa-times" (click)="clearSingleFlter(fltr,i)"></i>
        </div>
        <div class="float-right">
          <!-- <div class="btn btn-primary btn-sm mr-2">Save Filter</div> -->
          <div class="btn btn-primary btn-sm curs-ptr" (click)="clearAllFilter()">Clear</div>
        </div>
      </div>
      <div class="search">
        <mat-form-field appearance="outline" class="custom-mat-input w-100 mb-2" [floatLabel]="'never'">
          <i matPrefix class="fas fa-search"></i>
          <input matInput placeholder="Search ..." autocomplete="disabled" [(ngModel)]="searchTxt"
            (ngModelChange)='searchTxtChng.next($event)'>
        </mat-form-field>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #cntntTable>
  <div *ngIf="!cntntLoading">
    <div class="card-text px-3 min-height">
      <div class="pl-0 mb-2" *ngIf="selItems>0">
        {{selItems}} of {{cntnts.length}} items selected
        <div class="btn btn-primary btn-sm" (click)="clrUnClrSel(false)">Clear Selection</div>
        <div class="float-right">
          <div class="btn btn-primary btn-sm curs-ptr" (click)="multiCntntChng(0)" *ngIf="activeIndex==0">Move to Trash
          </div>
          <ng-container *ngIf="activeIndex==2">
            <div class="btn btn-primary btn-sm curs-ptr" (click)="multiCntntChng(1)">Restore</div>
            <div class="btn btn-primary btn-sm curs-ptr ml-3" (click)="multiCntntChng(2)">Delete</div>
          </ng-container>
        </div>
      </div>
      <table class="table table-hover text-dark w-100" [class.hide-rows]="showRowInfo || showWork" *ngIf="view">
        <thead>
          <tr>
            <th>
              <mat-checkbox [indeterminate]="chkBoxStatus==1" [checked]="chkBoxStatus==2"
                (change)="clrUnClrSel($event.checked)"></mat-checkbox>
            </th>
            <th class="curs-ptr" *ngFor="let col of cols;let i =index" (click)="sortChange(col,i)">
              {{col.n}}<i class="fas ml-1" *ngIf="col.hasOwnProperty('asc')"
                [ngClass]="{'fa-sort-down align-top':!col.asc,'fa-sort-up align-bottom': col.asc}"></i>
            </th>
          </tr>
        </thead>
        <tbody cdkDropList id="cntntLists" [cdkDropListData]="cntnts" class="min-ht pl-0 mt-2"
          [cdkDropListConnectedTo]="['fldrLists']" (cdkDropListDropped)="drop($event)" *ngIf="cntnts.length > 0">
          <tr *ngFor="let cntnt of cntnts" (click)="toggleInfo(cntnt)" [ngClass]="{'sel-row':(rowInfo.id === cntnt.id), 'cur-mov':!isNotDrag()}"
           [cdkDragDisabled]="isNotDrag()" cdkDrag>
            <div *cdkDragPreview><img [src]="getImg(cntnt)" alt="Thumbnail" style="height:100px;width:100px"></div>
            <td>
              <mat-checkbox [checked]="cntnt.chk" (change)="chngChkBox($event, cntnt)" (click)="$event.stopPropagation();"></mat-checkbox>
            </td>
            <td *ngFor="let col of cols">
              <span [ngSwitch]="col.k">
                <span *ngSwitchCase="'name'">
                  {{cntnt.name}}<br />
                  <span *ngFor="let tg of cntnt.contentTags" class="badge badge-light p-2 mt-2 mr-1">{{tg.name}}
                  </span>
                </span>
                <span *ngSwitchCase="'createdDate'">{{(cntnt.createdDate|date:'dd MMM, yyyy HH:mm')||'N/A'}}</span>
                <span *ngSwitchCase="'updatedDate'">{{(cntnt.updatedDate|date:'dd MMM, yyyy HH:mm')||'N/A'}}</span>
                <span *ngSwitchCase="'queuedAt'">{{(cntnt.queuedAt|date:'dd MMM, yyyy HH:mm')||'N/A'}}</span>
                <span *ngSwitchCase="'size'">{{getSize(cntnt.size)}}</span>
                <span *ngSwitchCase="'contentLanguages'">
                  <span *ngFor="let cL of cntnt.contentLanguages" class="badge badge-light p-2 mt-2 mr-1 mt-sm-0">{{cL.name}}
                  </span>
                </span>
                <span *ngSwitchDefault>{{cntnt[col.k]}}</span>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="text-center text-secondary pt-5 mt-4" *ngIf="cntnts.length<= 0">
        No Content {{activeIndex==1?'is currently being processed':'Found'}}
      </div>
      <div class="row justify-content-between" *ngIf="!view" cdkDropList id="cntntLists" [cdkDropListData]="cntnts"
        [cdkDropListConnectedTo]="['fldrLists']" (cdkDropListDropped)="drop($event)">
        <div class="col-md-4 text-center my-3 curs-ptr mx-auto mx-md-2 p-3 rounded" *ngFor="let cntnt of cntnts"
          (click)="toggleInfo(cntnt)" style="max-width:300px;"
          [ngClass]="{'sel-row':(rowInfo.id === cntnt.id), 'cur-mov':!isNotDrag()}" [cdkDragDisabled]="isNotDrag()"
          cdkDrag>
          <div *cdkDragPreview><img [src]="getImg(cntnt)" alt="Thumbnail" style="height:100px;width:100px"></div>
          <div class="grid-image">
            <img [src]="getImg(cntnt)" alt="{{cntnt.name}}">
          </div>
          <div class="name bg-hi-grey rounded w-75 mx-auto px-2 my-2">{{cntnt.name}}</div>
        </div>
      </div>
    </div>
    <app-pagination [pageSize]="pageSize" [totalCount]="totalCount" [page]="pageNo"
      (pageSizeChange)="pageSizeChange($event)" (paginationNum)="changePageNo($event)"></app-pagination>
  </div>
</ng-template>

<!-- upload file modal  -->
<ng-template #uploadFile let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Upload Files</h4>
    <button type="button" class="close" aria-label="Close" (click)="changeProcStatus(false)">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <ng-container *ngIf="!procUpld">
    <form name="cntntForm" (ngSubmit)="onCntntSubmit()" [formGroup]="cntntForm" novalidate>
      <div class="modal-body" ngbAutofocus>
        <div class="custom-file-select" appFileDnd (fileDropped)="onFileDropped($event)">
          <input type="file" multiple (change)="fileBrowseHandler($event)" accept="{{fileExt.toString()}}">
          <input type="hidden" formControlName="img" /> <!-- Validation Field -->
          <div class="text-center my-5">
            <h2><i class="fa fa-upload"></i></h2>
            <h5>Drag & Drop file here</h5>
            OR
            <div class="btn btn-primary d-block w-25 mx-auto mt-3">Browse</div>
          </div>
        </div>
        <div class="files-list">
          <div class="single-file mt-3 row mx-0 p-2" *ngFor="let f of files; let i = index">
            <div class="info mx-auto">
              <h6 class="name mb-0 text-wrap">
                {{ f?.name }}
              </h6>
              <p class="size mb-0">
                {{ getSize(f?.size) }}
              </p>
              <app-file-progess [progress]="f?.progress"></app-file-progess>
            </div>
            <div>
              <i class="fas fa-trash curs-ptr" (click)="deleteFile(i)"></i>
            </div>
          </div>
        </div>
        <hr>
        <div class="w-100 dark-bg-hover p-2 rounded" (click)="this.dispPropsSec = !this.dispPropsSec;">
          Properties
          <div class="float-right">
            <i class="fa" [ngClass]="{'fa-angle-up': !dispPropsSec,'fa-angle-down': dispPropsSec}"></i>
          </div>
        </div>
        <div class="mt-2" *ngIf="dispPropsSec">
          <mat-form-field appearance="outline" class="w-100">
            <mat-chip-list aria-label="Select tags">
              <mat-chip *ngFor="let d of selTags" [selectable]="selectable" [removable]="removable"
                (removed)="remove(d,'selTags')">
                {{d.name}}
                <i matChipRemove class="fas fa-times-circle" *ngIf="removable"></i>
              </mat-chip>
              <input matInput #cntntTgInp [(ngModel)]="cntntTag" name="cntntTag" [ngModelOptions]="{standalone: true}"
                placeholder="Select tags" [matAutocomplete]="auto2">
            </mat-chip-list>
            <mat-autocomplete #auto2="matAutocomplete"
              (optionSelected)="selFromAutoComp($event.option.value,'selTags',cntntTgInp)" [displayWith]="displayFn">
              <mat-option *ngFor="let tg of tags|filterName: cntntTag: 'name'" [value]="tg">
                {{tg.name}}
              </mat-option>
            </mat-autocomplete>
            <mat-hint>Tags help you filter content or create smart folders</mat-hint>
          </mat-form-field>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
        <button class="btn btn-primary" [disabled]="files.length<=0 || cntntDisb">
          <app-loader [type]="'btn'" *ngIf="cntntDisb"></app-loader>
          Upload
        </button>
      </div>
    </form>
  </ng-container>
  <ng-container *ngIf="procUpld">
    <div class="modal-body" ngbAutofocus>
      <div class="files-list">
        <div class="single-file mt-3 row mx-0 p-2" *ngFor="let f of files;">
          <div class="info d-flex col-10">
            <i class="fas fa-exclamation-triangle mr-1" *ngIf="f.t==2"></i>
            <i class="fas fa-check-circle" *ngIf="f.t==1"></i>
            <app-loader [type]="'btn-red'" *ngIf="f.t==0"></app-loader>
            <h6 class="name mb-0 text-wrap ml-2">
              {{ f?.name||'' }}
            </h6>
          </div>
          <div class="col-2">
            {{ getSize(f?.size) }}
          </div>
        </div>
      </div>
      <hr>
      <div class="w-100 dark-bg-hover p-2 rounded" (click)="this.dispPropsSec = !this.dispPropsSec;">
        Properties
        <div class="float-right">
          <i class="fa" [ngClass]="{'fa-angle-up': !dispPropsSec,'fa-angle-down': dispPropsSec}"></i>
        </div>
      </div>
      <div class="mt-2" *ngIf="dispPropsSec">
        <mat-form-field appearance="outline" class="w-100">
          <mat-chip-list>
            <mat-chip *ngFor="let d of selTags">
              {{d.name}}
            </mat-chip>
          </mat-chip-list>
        </mat-form-field>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="changeProcStatus(false);">Cancel</button>
      <button class="btn btn-primary" [disabled]="files.length<=0 || cntntDisb" (click)="changeProcStatus(true);">
        <app-loader [type]="'btn'" *ngIf="cntntDisb || procUpldLoad"></app-loader>
        Done
      </button>
    </div>
  </ng-container>
</ng-template>

<!-- add url modal  -->
<ng-template #addUrl let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Add a URL</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="urlForm" (ngSubmit)="onUrlSubmit()" [formGroup]="urlForm" novalidate>
    <div class="modal-body">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Icon</mat-label>
        <mat-select (selectionChange)="iconURLHandler($event)" formControlName="iconType" required>
          <mat-option [value]="1">Default Icon</mat-option>
          <mat-option [value]="2">Choose a Custom Icon</mat-option>
        </mat-select>
        <mat-error *ngIf="urlForm.get('iconType')!.hasError('required')">
          Icon Type is required
        </mat-error>
      </mat-form-field>
      <div class="custom-file-select" appFileDnd *ngIf="urlForm.controls.img && urlForm.value.iconType==2"
        (fileDropped)="onFileDropped($event,true,'urlForm')">
        <input type="file" id="uploadFileInput" (change)="fileBrowseHandler($event ,true,'urlForm')" accept="image/*">
        <input type="hidden" formControlName="img" />
        <div class="text-center my-5">
          <h2><i class="fa fa-upload"></i></h2>
          <h5>Drag & Drop file here</h5>
          OR
          <div class="btn btn-primary d-block w-25 mx-auto mt-3">Browse</div>
        </div>
      </div>
      <img [src]="iconUrl?iconUrl:defIcon" class="border mt-2 mb-4" style="height: 130px; width: auto;">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Add a Name" formControlName="name" maxlength="100" required />
        <div matSuffix>.url</div>
        <mat-error *ngIf="urlForm.get('name')!.hasError('required')">
          Name is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Description</mat-label>
        <textarea rows="3" matInput placeholder="Add a Description" formControlName="description"
          maxlength="300"></textarea>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>URL </mat-label>
        <input matInput placeholder="Add a URL" formControlName="url" maxlength="300" required />
        <mat-error *ngIf="urlForm.get('name')!.hasError('required')">
          URL is required
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-100">
        <mat-chip-list aria-label="Select tags">
          <mat-chip *ngFor="let d of selTags" [selectable]="selectable" [removable]="removable"
            (removed)="remove(d,'selTags')">
            {{d.name}}
            <i matChipRemove class="fas fa-times-circle" *ngIf="removable"></i>
          </mat-chip>
          <input matInput #urlTgInp [(ngModel)]="urlTag" name="urlTag" [ngModelOptions]="{standalone: true}"
            placeholder="Select tags" [matAutocomplete]="auto1">
        </mat-chip-list>
        <mat-autocomplete #auto1="matAutocomplete"
          (optionSelected)="selFromAutoComp($event.option.value,'selTags',urlTgInp)" [displayWith]="displayFn">
          <mat-option *ngFor="let tg of tags|filterName: urlTag: 'name'" [value]="tg">
            {{tg.name}}
          </mat-option>
        </mat-autocomplete>
        <mat-hint>Tags help you filter content or create smart folders</mat-hint>
      </mat-form-field>
      <div class="options">
        Options<br />
        <mat-checkbox>Can be Shared <i class="fa fa-info-circle"
            matTooltip="Users can share this file via Email, Link,Shared Space or Plugin"></i></mat-checkbox><br />
        <mat-checkbox formControlName="hideLabelInWorkspace">Hide name in Workspace</mat-checkbox>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
      <button class="btn btn-primary" [disabled]="urlForm!.invalid || urlDisb">
        <app-loader [type]="'btn'" *ngIf="urlDisb"></app-loader>
        Save
      </button>
    </div>
  </form>
</ng-template>

<!-- add/edit/duplicate folder modal  -->
<ng-template #folderModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{edit ? 'Edit' : edit == undefined ? 'Duplicate' : 'Add'}} Folder
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="folderForm" (ngSubmit)="folderSubmit()" [formGroup]="folderForm" novalidate>
    <div class="modal-body" ngbAutofocus>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="gnrlCollapsed = !gnrlCollapsed"
        [attr.aria-expanded]="!gnrlCollapsed" aria-controls="generalFolder">
        General
        <div class="float-right">
          <ng-container *ngIf="!gnrlCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="general" id="generalFolder" [ngbCollapse]="gnrlCollapsed">
        <div class="custom-file-select" appFileDnd (fileDropped)="onFileDropped($event,true)">
          <input type="file" id="uploadFileInput" #ip (change)="fileBrowseHandler($event ,true)" accept="image/*">
          <div class="text-center my-5">
            <h2><i class="fa fa-upload"></i></h2>
            <h5>Drag & Drop an icon image here</h5>
            OR
            <div class="btn btn-primary d-block w-25 mx-auto mt-3">Browse</div>
          </div>
        </div>
        <div class="image border mt-2 mb-4">
          <img [src]="iconUrl && addURLIcon == 'cust-icon' ? iconUrl : defIcon">
          <div class="del-btn btn btn-light" *ngIf="iconUrl && addURLIcon=='cust-icon'" (click)="remImg()"><i
              class="fas fa-trash-alt"></i></div>
        </div>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Folder Label</mat-label>
          <input matInput placeholder="Folder Label" formControlName="name" maxlength="100" required />
          <mat-error *ngIf="folderForm.get('name')!.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Description</mat-label>
          <textarea matInput placeholder="Description" formControlName="description" maxlength="200"></textarea>
        </mat-form-field>
        <div class="options">
          Options
          <mat-checkbox class="d-block ml-3" formControlName="hideLabelInWorkspace">Hide label in Workspace
          </mat-checkbox>
        </div>
      </div>
      <hr *ngIf="edit || edit === undefined">
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="editSmrtCollapsed = !editSmrtCollapsed"
        [attr.aria-expanded]="!editSmrtCollapsed" aria-controls="editSmrtFldr" *ngIf="edit || edit === undefined">
        Edit Contained Smart Folders (0)
        <div class="float-right">
          <ng-container *ngIf="!editSmrtCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="smartFolders" id="editSmrtFldr" [ngbCollapse]="editSmrtCollapsed" *ngIf="edit || edit === undefined">
        <div class="add">
          <mat-checkbox class="ml-3">Add</mat-checkbox>
          <div class="row mx-0 justify-content-between">
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languages, countries">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-select>
                <mat-option value='all'>Match All</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="remove">
          <mat-checkbox class="ml-3">Remove</mat-checkbox>
          <mat-form-field appearance="outline" class="d-block">
            <input matInput type="text" placeholder="Search tags, languages, countries">
          </mat-form-field>
        </div>
        <div class="replace">
          <mat-checkbox class="ml-3">Replace</mat-checkbox>
          <div class="row mx-0 justify-content-between">
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languages, countries">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languaees, countries">
            </mat-form-field>
          </div>
        </div>
      </div>
      <hr *ngIf="edit || edit === undefined">
      <div class="w-100 dark-bg-hover p-2 rounded mb-2"
        (click)="locationCollapsed = !locationCollapsed; getWrkspcList(true);" [attr.aria-expanded]="!locationCollapsed"
        aria-controls="locationFolder" *ngIf="edit || edit === undefined">
        Location
        <div class="float-right">
          <ng-container *ngIf="!locationCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="location px-2" id="locationFolder" [ngbCollapse]="locationCollapsed"
        *ngIf="edit || edit === undefined">
        <nav aria-label="breadcrumb" *ngIf="mdlNav.length>0">
          <ol class="breadcrumb bg-white mb-0 p-0 ml-3">
            <li class="curs-ptr text-primary mr-2" (click)="backFolder(true)">
              <i class="fa fa-arrow-left align-self-center"></i>
            </li>
            <li class="breadcrumb-item" *ngFor="let nav of mdlNav">{{nav.name}}</li>
          </ol>
        </nav>
        <div class="scrollMe">
          <app-loader [type]="'page'" *ngIf="mdlLoading"></app-loader>
          <div *ngIf="!mdlLoading && mdlItems.length > 0">
            <div class="rounded d-flex m-2"
              [ngClass]="{'bg-light border-left border-primary': mdlSelected && (item.entityId || mdlSelected.entityId ? mdlSelected.entityId == item.entityId : mdlSelected.id == item.id)}"
              *ngFor="let item of mdlItems">
              <div class="btn btn-light mr-2" (click)="mdlListFolders(item)"><i class="fa fa-angle-right"></i></div>
              <div class="align-self-center curs-ptr w-100 py-2" (click)="mdlSelected = item;">{{item.name}}</div>
            </div>
          </div>
          <div class="text-secondary text-center mt-5" *ngIf="!mdlLoading && mdlItems.length == 0">
            No Folder Found
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="folderForm!.invalid || disabled">
        <app-loader [type]="'btn'" *ngIf="disabled"></app-loader>
        Save
      </button>
    </div>
  </form>
</ng-template>

<!-- add/edit/duplicate smart folder modal  -->
<ng-template #smartFolderModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{edit ? 'Edit' : edit == undefined ? 'Duplicate' : 'Add'}} Smart Folder</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="smartFolderModalForm" (ngSubmit)="smartFolderSubmit()" [formGroup]="smartFldrForm" novalidate>
    <div class="modal-body" ngbAutofocus>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="gnrlCollapsed = !gnrlCollapsed"
        [attr.aria-expanded]="!gnrlCollapsed" aria-controls="generalFolder">
        General
        <div class="float-right">
          <ng-container *ngIf="!gnrlCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="general" [ngbCollapse]="gnrlCollapsed">
        <div class="custom-file-select" appFileDnd (fileDropped)="onFileDropped($event,true)">
          <input type="file" id="uploadFileInput" #inp (change)="fileBrowseHandler($event ,true)" accept="image/*">
          <div class="text-center my-5">
            <h2><i class="fa fa-upload"></i></h2>
            <h5>Drag & Drop an icon image here</h5>
            OR
            <div class="btn btn-primary d-block w-25 mx-auto mt-3">Browse</div>
          </div>
        </div>
        <div class="image border mt-2 mb-4">
          <img [src]="iconUrl && addURLIcon == 'cust-icon' ? iconUrl : defIcon">
          <div class="del-btn btn btn-light" *ngIf="iconUrl && addURLIcon=='cust-icon'" (click)="remImg()">
            <i class="fas fa-trash-alt"></i>
          </div>
        </div>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Smart Folder Label</mat-label>
          <input matInput placeholder="Smart Folder Label" formControlName="name" maxlength="100" required />
          <mat-error *ngIf="smartFldrForm.get('name')!.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Description</mat-label>
          <textarea matInput placeholder="Description" formControlName="description" maxlength="200"></textarea>
        </mat-form-field>
        <div class="options">
          Options
          <mat-checkbox class="d-block" formControlName="hideLabelInWorkspace">Hide label in Workspace</mat-checkbox>
        </div>
      </div>
      <hr>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="editSmrtCollapsed = !editSmrtCollapsed"
        [attr.aria-expanded]="!editSmrtCollapsed" aria-controls="collapseExample">
        Smart Folder Settings
        <div class="float-right">
          <ng-container *ngIf="!editSmrtCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div [ngbCollapse]="editSmrtCollapsed">
        <div class="card">
          <div class="card-header row mx-auto w-100">
            <div class="dropdown mr-2">
              <button class="btn btn-light dropdown-toggle" type="button" id="fileTypeDD" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                File Type
              </button>
              <div class="dropdown-menu" aria-labelledby="fileTypeDD" (click)="$event.stopPropagation();">
                <mat-checkbox class="dropdown-item" *ngFor="let ft of fileTypesArr"
                  (change)="addFileType($event.checked, ft)">{{ft.n}}
                </mat-checkbox>
              </div>
            </div>
            <div class="dropdown mr-2">
              <button class="btn btn-light dropdown-toggle" type="button" id="tagsDD" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                Tags
              </button>
              <div class="dropdown-menu overflow-auto px-2 tags-dd" aria-labelledby="tagsDD"
                (click)="$event.stopPropagation();">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-chip-list>
                    <mat-chip *ngFor="let tg of allTags" selectable removable (removed)="remove(tg,'allTags')">
                      {{tg.name}}
                      <i matChipRemove class="fas fa-times-circle"></i>
                    </mat-chip>
                    <input matInput #alTg placeholder="Match ALL of these tags" [(ngModel)]="alTgTxt" name="alTgTxt"
                      [ngModelOptions]="{standalone: true}" [matAutocomplete]="autoAll">
                  </mat-chip-list>
                  <mat-autocomplete #autoAll="matAutocomplete"
                    (optionSelected)="selFromAutoComp($event.option.value,'allTags',alTg)" [displayWith]="displayFn">
                    <mat-option *ngFor="let tg of tags|filterName: alTgTxt: 'name'" [value]="tg"
                      (click)="$event.stopPropagation();">
                      {{tg.name}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-chip-list>
                    <mat-chip *ngFor="let tg of anyTags" selectable removable (removed)="remove(tg,'anyTags')">
                      {{tg.name}}
                      <i matChipRemove class="fas fa-times-circle"></i>
                    </mat-chip>
                    <input matInput #anTg placeholder="Match ANY of these tags" [(ngModel)]="anTgTxt" name="anTgTxt"
                      [ngModelOptions]="{standalone: true}" [matAutocomplete]="autoAny">
                  </mat-chip-list>
                  <mat-autocomplete #autoAny="matAutocomplete"
                    (optionSelected)="selFromAutoComp($event.option.value,'anyTags',anTg)" [displayWith]="displayFn">
                    <mat-option *ngFor="let tg of tags|filterName: anTgTxt: 'name'" [value]="tg"
                      (click)="$event.stopPropagation();">
                      {{tg.name}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-chip-list>
                    <mat-chip *ngFor="let tg of noneTags" selectable removable (removed)="remove(tg,'noneTags')">
                      {{tg.name}}
                      <i matChipRemove class="fas fa-times-circle"></i>
                    </mat-chip>
                    <input matInput #noTg placeholder="Match NONE of these tags" [(ngModel)]="noTgTxt" name="noTgTxt"
                      [ngModelOptions]="{standalone: true}" [matAutocomplete]="autoNone">
                  </mat-chip-list>
                  <mat-autocomplete #autoNone="matAutocomplete"
                    (optionSelected)="selFromAutoComp($event.option.value,'noneTags',noTg)" [displayWith]="displayFn">
                    <mat-option *ngFor="let tg of tags|filterName: noTgTxt: 'name'" [value]="tg"
                      (click)="$event.stopPropagation();">
                      {{tg.name}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </div>
            </div>
            <!-- <div class="dropdown">
              <button class="btn btn-light dropdown-toggle" type="button" id="authorDD" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Author
              </button>
              <div class="dropdown-menu" aria-labelledby="authorDD" style="width:18rem;">
                <mat-form-field appearance="outline" class="custom-mat-input w-100 mb-2 px-3" [floatLabel]="'never'">
                  <i matPrefix class="fas fa-search"></i>
                  <input matInput placeholder="Search ...">
                </mat-form-field>
                <div class="dropdown-divider"></div>
                <div class="row justify-content-around m-0">
                  <button class="btn btn-light text-primary">Select all</button>
                  <button class="btn btn-light">Clear all</button>
                </div>
                <div class="dropdown-divider"></div>
                <div style="max-height: 200px; overflow-y: auto;">
                  <mat-checkbox class="dropdown-item">ABC (you)</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                  <mat-checkbox class="dropdown-item">def</mat-checkbox>
                </div>
              </div>
            </div> -->
          </div>
          <div class="card-body row mx-auto w-100">
            <div class="col-4">
              Select the criteria for this smart folder, or:
            </div>
            <div class="col-8">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Search saved filter</mat-label>
                <mat-select>
                  <mat-option value=""></mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="row justify-content-between mx-0 mt-3 align-self-center">
          <mat-form-field appearance="outline">
            <mat-label>Sort files on</mat-label>
            <mat-select>
              <mat-option value="name">Name</mat-option>
              <mat-option value="file-size">File Size</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-radio-group aria-label="Select an option" class="align-self-center">
            <mat-radio-button value="asc" class="mr-3">
              <i class="fa fa-arrow-up"></i>
            </mat-radio-button>
            <mat-radio-button value="dsc">
              <i class="fa fa-arrow-down"></i>
            </mat-radio-button>
          </mat-radio-group>
          <mat-form-field appearance="outline">
            <mat-label>List number of files to</mat-label>
            <input type="number" matInput placeholder="List number of files to" formControlName="limitNoOfFiles">
          </mat-form-field>
        </div>
      </div>
      <hr *ngIf="edit || edit === undefined">
      <div class="w-100 dark-bg-hover p-2 rounded mb-2"
        (click)="locationCollapsed = !locationCollapsed; getWrkspcList(true);" [attr.aria-expanded]="!locationCollapsed"
        aria-controls="locationFolder" *ngIf="edit || edit === undefined">
        Location
        <div class="float-right">
          <ng-container *ngIf="!locationCollapsed; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="location px-2" id="locationFolder" [ngbCollapse]="locationCollapsed"
        *ngIf="edit || edit === undefined">
        <nav aria-label="breadcrumb" *ngIf="mdlNav.length>0">
          <ol class="breadcrumb bg-white mb-0 p-0 ml-3">
            <li class="curs-ptr text-primary mr-2" (click)="backFolder(true)">
              <i class="fa fa-arrow-left align-self-center"></i>
            </li>
            <li class="breadcrumb-item" *ngFor="let nav of mdlNav">{{nav.name}}</li>
          </ol>
        </nav>
        <div class="scrollMe">
          <app-loader [type]="'page'" *ngIf="mdlLoading"></app-loader>
          <div *ngIf="!mdlLoading && mdlItems.length > 0">
            <div class="rounded d-flex m-2"
              [ngClass]="{'bg-light border-left border-primary': mdlSelected && (item.entityId || mdlSelected.entityId ? mdlSelected.entityId == item.entityId : mdlSelected.id == item.id)}"
              *ngFor="let item of mdlItems">
              <div class="btn btn-light mr-2" (click)="mdlListFolders(item)"><i class="fa fa-angle-right"></i></div>
              <div class="align-self-center curs-ptr w-100 py-2" (click)="mdlSelected = item;">{{item.name}}</div>
            </div>
          </div>
          <div class="text-secondary text-center mt-5" *ngIf="!mdlLoading && mdlItems.length == 0">
            No Folder Found
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="smartFldrForm!.invalid || disabled">
        <app-loader [type]="'btn'" *ngIf="disabled"></app-loader>
        Save
      </button>
    </div>
  </form>
</ng-template>

<!-- edit workspace modal  -->
<ng-template #editWorkspace let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{edit ? 'Edit' : 'Duplicate'}} Workspace</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="updWrkspcForm" (ngSubmit)="updWrkspc()" [formGroup]="updWrkspcForm" novalidate>
    <div class="modal-body" ngbAutofocus>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="this.dispGnrl = !this.dispGnrl;">
        General
        <div class="float-right">
          <ng-container *ngIf="dispGnrl; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="general" *ngIf="dispGnrl">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Workspace Label</mat-label>
          <input matInput type="text" placeholder="Workspace Label" formControlName="name" maxlength="100" required />
          <mat-error *ngIf="updWrkspcForm.get('name')!.hasError('required')">
            Name is required
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100" *ngIf="edit">
          <mat-label>Description</mat-label>
          <textarea matInput type="text" placeholder="Description" maxlength="300"></textarea>
        </mat-form-field>
      </div>
      <hr>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="this.dispSettings = !this.dispSettings;">
        Settings
        <div class="float-right">
          <ng-container *ngIf="dispSettings; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="settings" *ngIf="dispSettings">
        <div class="mb-2" *ngIf="!edit">
          <mat-label>Options</mat-label>
          <mat-checkbox class="d-block ml-3">Add me to this Workspace</mat-checkbox>
        </div>
        <div class="mb-2">
          <mat-label>Content</mat-label>
          <mat-checkbox class="d-block ml-3">Hide empty folders <i class="fa fa-info-circle"
              matTooltip="When enabled all (smart) folders without content will be hidden."></i></mat-checkbox>
        </div>
        <div>
          <mat-label>
            Default view
            <mat-radio-group aria-label="Select an option" class="d-block ml-3">
              <mat-radio-button value="1" class="mr-2">Grid View</mat-radio-button>
              <mat-radio-button value="2">List View</mat-radio-button>
            </mat-radio-group>
          </mat-label>
        </div>
      </div>
      <hr>
      <div class="w-100 dark-bg-hover p-2 rounded mb-2" (click)="this.dispSmart = !this.dispSmart;">
        Edit Contained Smart Folders (0)
        <div class="float-right">
          <ng-container *ngIf="dispSmart; else elseIcon">
            <i class="fa fa-angle-up"></i>
          </ng-container>
          <ng-template #elseIcon>
            <i class="fa fa-angle-down"></i>
          </ng-template>
        </div>
      </div>
      <div class="smartFolders" *ngIf="dispSmart">
        <div class="add">
          <mat-checkbox class="ml-3">Add</mat-checkbox>
          <div class="row mx-0 justify-content-between">
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languagees, countries">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-select>
                <mat-option value='all'>Match All</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="remove">
          <mat-checkbox class="ml-3">Remove</mat-checkbox>
          <mat-form-field appearance="outline" class="d-block">
            <input matInput type="text" placeholder="Search tags, languagees, countries">
          </mat-form-field>
        </div>
        <div class="replace">
          <mat-checkbox class="ml-3">Replace</mat-checkbox>
          <div class="row mx-0 justify-content-between">
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languagees, countries">
            </mat-form-field>
            <mat-form-field appearance="outline">
              <input matInput type="text" placeholder="Search tags, languagees, countries">
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="updWrkspcForm!.invalid || disabled">
        <app-loader [type]="'btn'" *ngIf="disabled"></app-loader>
        Save
      </button>
    </div>
  </form>
</ng-template>

<!-- add workspace modal  -->
<ng-template #addWorkspace let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Create Workspace</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="addWrkspcForm" (ngSubmit)="addWorkSpc()" [formGroup]="addWrkspcForm" novalidate>
    <div class="modal-body" ngbAutofocus>
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Workspace Label</mat-label>
        <input matInput type="text" placeholder="Workspace Label" formControlName="name" maxlength="100" required />
        <mat-error *ngIf="addWrkspcForm.get('name')!.hasError('required')">
          Name is required
        </mat-error>
      </mat-form-field>
      <!-- <mat-checkbox class="d-block ml-3">Open new Workspace</mat-checkbox> -->
      <mat-checkbox class="d-block ml-3" formControlName="assignMeToWorkspace">Add me to this Workspace</mat-checkbox>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-primary" [disabled]="addWrkspcForm!.invalid || disabled">
        <app-loader [type]="'btn'" *ngIf="disabled"></app-loader>
        Create
      </button>
    </div>
  </form>
</ng-template>

<!-- upload file modal  -->
<ng-template #uplNewVer let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Upload New Version</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form name="verForm" (ngSubmit)="newVersion()" [formGroup]="verForm" novalidate>
    <div class="modal-body" ngbAutofocus>
      <div class="alert alert-primary" role="alert">
        <i class="fas fa-exclamation-triangle mr-2"></i>If this file is used in Collections and Shares, it will be
        updated automatically in all those places.
      </div>
      <div class="custom-file-select" appFileDnd (fileDropped)="onFileDropped($event,false,'newVer')">
        <input type="file" (change)="fileBrowseHandler($event,false,'newVer')" accept="{{fileExt.toString()}}">
        <input type="hidden" />
        <div class="text-center my-5">
          <h2><i class="fa fa-upload"></i></h2>
          <h5>Drag & Drop file here</h5>
          OR
          <div class="btn btn-primary d-block w-25 mx-auto mt-3">Browse</div>
        </div>
      </div>
      <div class="files-list">
        <div class="single-file mt-3 row mx-0 p-2" *ngFor="let f of files; let i = index">
          <div class="info mx-auto">
            <h6 class="name mb-0 text-wrap">
              {{ f?.name||'' }}
            </h6>
            <p class="size mb-0">
              {{ getSize(f?.size) }}
            </p>
            <app-file-progess [progress]="f?.progress"></app-file-progess>
          </div>
          <div>
            <i class="fas fa-trash curs-ptr" (click)="deleteFile(i)"></i>
          </div>
        </div>
      </div>
      <hr>
      <div class="w-100 dark-bg-hover p-2 rounded" (click)="this.dispPropsSec = !this.dispPropsSec;">
        Form Permissions
        <div class="float-right">
          <i class="fa" [ngClass]="{'fa-angle-down': !dispPropsSec,'fa-angle-up': dispPropsSec}"></i>
        </div>
      </div>
      <div class="mt-2" *ngIf="dispPropsSec">
        <mat-checkbox class="d-block ml-3" formControlName="LikeReset">Reset likes</mat-checkbox>
        <mat-checkbox class="d-block ml-3" formControlName="KeepCurrentFileName">Keep current filename</mat-checkbox>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary mr-2" (click)="modal.dismiss('Cross click')">Cancel</button>
      <button class="btn btn-primary" [disabled]="files.length<=0 || verDisb">
        <app-loader [type]="'btn'" *ngIf="verDisb"></app-loader>
        Save
      </button>
    </div>
  </form>
</ng-template>
