<div class="main main-employee">
  <div class="row mt-3 mx-0">
    <!-- side -->
    <div class="side col-sm-2 files-side">
      <ul class="list-unstyled mt-5">
        <li class="pr-2 pl-3 rounded py-2 curs-ptr active"><i class="fas fa-folder mr-1"></i>My Files</li>
        <hr>
        <li class="pr-2 pl-3 rounded py-2 curs-ptr"><i class="fas fa-user-friends mr-1"></i>Shared with me</li>
        <hr>
        <li class="pr-2 pl-3 rounded py-2 curs-ptr"><i class="fas fa-clock mr-1"></i>Recent</li>
      </ul>
      <hr>
      <div class="storage">
        <div class="text-secondary text-center">
          3.3 MB of 2 GB used
          <div class="progress mt-2" style="height:10px;">
            <div class="progress-bar" role="progressbar" style="width: 1%;" aria-valuenow="3" aria-valuemin="0"
              aria-valuemax="2048"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- main -->
    <div class="col-sm-10">
      <h3 class="mb-4 clearfix heading align-self-center">
        My Files
        <div class="float-right d-flex">
          <i class="fa mr-3 curs-ptr align-self-center" [ngClass]="{'fa-list-ul': view, 'fa-th-large': !view}"
            (click)="switchView()" matTooltip="{{view? 'List View' : 'Grid View'}}"></i>
          <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="addBtnDD" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Add
            </button>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="addBtnDD">
              <a class="dropdown-item curs-ptr" (click)="openModal(addFolder)"><i class="fas fa-folder-plus mr-1"></i>
                Create Folder
              </a>
              <a class="dropdown-item curs-ptr" (click)="openModal(addURL)"><i class="fa fa-link mr-1"></i>Add URL</a>
              <a class="dropdown-item curs-ptr" (click)="uploadBtn(uploadFile)"><i class="fa fa-upload mr-1"></i>
                Upload from hard drive
                <input type="file" style="display: none;" #uploadFile>
              </a>
            </div>
          </div>
        </div>
      </h3>
      <div class="text-right" *ngIf="view">
        Sort by:
        <span class="text-primary mr-2 curs-ptr">Name<i class="fa fa-sort-down align-top ml-1"></i></span>
        <span class="text-primary curs-ptr">Date Modified<i class="fa fa-sort-down align-top ml-1"></i></span>
      </div>
      <!-- folders -->
      <div class="text-secondary">Folders</div>
      <div class="mt-2 row my-files" *ngIf="view">
        <div class="card-container col-lg-3 col-md-4 col-sm-6 my-3 mx-auto mx-sm-0">
          <div class="card curs-ptr">
            <div class="card-body d-flex">
              <div class="name align-self-center px-0"><i class="fas fa-folder mr-1"></i>Folder name 1234</div>
              <div class="d-flex p-0 __options ml-auto">
                <div class="_options">
                  <div class="btn btn-light btn-sm mr-1"><i class="fas fa-edit"></i></div>
                  <div class="btn btn-light btn-sm mr-1"><i class="fas fa-trash-alt"></i></div>
                </div>
                <mat-checkbox class="align-self-center"></mat-checkbox>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- files -->
      <div class="text-secondary">Files</div>
      <div class="mt-2 row my-files" *ngIf="view">
        <div class="card-container col-lg-3 col-md-4 col-sm-6 my-3 mx-auto mx-sm-0" *ngFor="let t of testArr">
          <div class="card curs-ptr">
            <div class="card-body">
              <div class="imagePreview text-center">
                <img src="assets/images/discription.png">
              </div>
              <div class="options rounded">
                <div class="dropleft">
                  <button class="btn" type="button" id="shareDD" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <i class="fas fa-share-square"></i>
                  </button>
                  <div class="dropdown-menu" aria-labelledby="shareDD">
                    <h6 class="ml-2 text-white-50">External Sharing</h6>
                    <a class="dropdown-item" (click)="openModal(email)"><i class="fa fa-envelope mr-1"></i>Email</a>
                    <a class="dropdown-item" (click)="openModal(getLink)"><i class="fa fa-link mr-1"></i>Get a link</a>
                    <div class="dropdown-divider"></div>
                    <h6 class="ml-2 text-white-50">Internal Sharing</h6>
                    <a class="dropdown-item" (click)="openModal(shareColl)"><i class="fa fa-user-friends mr-1"></i>Share
                      with
                      colleagues</a>
                  </div>
                </div>
                <div class="btn my-1" (click)="openModal(addtoCollection)">
                  <i class="fas fa-folder-plus"></i>
                </div>
                <div class="btn">
                  <i class="fas fa-trash-alt"></i>
                </div>
              </div>
            </div>
            <div class="card-footer">
              <div class="name">Test</div>
              <div class="float-left text-secondary d-flex">
                <div class="date">Oct 10, 2020</div>
                <div class="mx-2">l</div>
                <div class="items">3 Items</div>
              </div>
              <div class="float-right">
                <mat-checkbox></mat-checkbox>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-2 row my-files" *ngIf="!view">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>
                <mat-checkbox></mat-checkbox>
              </th>
              <th>Name<i class="fas fa-sort-down ml-1 align-top"></i></th>
              <th>Date Modified<i class="fas fa-sort-down ml-1 align-top"></i></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let t of testArr">
              <td class="align-middle">
                <mat-checkbox></mat-checkbox>
              </td>
              <td class="align-middle">
                <div class="d-flex">
                  <div class="imagePreview border mr-2">
                    <img src="assets/images/discription.png">
                  </div>
                  <div class="name align-self-center">Abc def</div>
                </div>
              </td>
              <td class="align-middle">16 Oct, 2020 14:40</td>
              <td class="align-middle options">
                <div class="d-flex">
                  <div class="dropleft">
                    <button class="btn" type="button" id="shareDD" data-toggle="dropdown" aria-haspopup="true"
                      aria-expanded="false">
                      <i class="fas fa-share-square"></i>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="shareDD">
                      <a class="dropdown-item" (click)="openModal(email)"><i class="fa fa-envelope mr-1"></i>Email</a>
                      <a class="dropdown-item" (click)="openModal(getLink)"><i class="fa fa-link mr-1"></i>Get a
                        link</a>
                    </div>
                  </div>
                  <div class="btn" (click)="openModal(addtoCollection)">
                    <i class="fas fa-folder-plus"></i>
                  </div>
                  <div class="btn">
                    <i class="fas fa-trash-alt"></i>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>

<!-- fixed div on selecting a collection -->
<div class="row mx-auto fixed-bottom px-3" style="width: 90%; background-color: #fff; height: 50px;">
  <div class="selected-items text-secondary align-self-center">1 item selected</div>
  <div class="mr-1 ml-3 align-self-center">|</div>
  <div class="btn btn-outline-primary border-0 align-self-center">Clear</div>
  <div class="btn btn-light align-self-center ml-auto bg-white" (click)="openModal(email)"><i
      class="fa fa-envelope mr-1"></i>Email</div>
  <div class="btn btn-light align-self-center bg-white" (click)="openModal(getLink)"><i class="fa fa-link mr-1"></i>Get
    a
    link</div>
  <div class="btn btn-light align-self-center bg-white" (click)="openModal(addtoCollection)"><i
      class="fa fa-folder-plus mr-1"></i>Add to collection</div>
  <div class="btn btn-primary align-self-center"><i class="fas fa-trash-alt mr-1"></i>Delete</div>
</div>

<!-- new collection modal -->
<ng-template #newCollection let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Create a Collection</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Name</mat-label>
      <input matInput type="text" placeholder="New Collection Name">
    </mat-form-field>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Save</button>
  </div>
</ng-template>

<!-- email modal -->
<ng-template #email let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Email</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <div class="row">
      <div class="col-9 border-right">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>To</mat-label>
          <input matInput type="text" placeholder="Recipients">
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Subject</mat-label>
          <input matInput type="text" placeholder="Subject">
        </mat-form-field>
        <div class="row">
          <mat-form-field appearance="outline" class="col-8">
            <mat-label>Message</mat-label>
            <input matInput type="text" placeholder="Search Content">
          </mat-form-field>
          <div class="col-4 mt-3">
            <div class="btn btn-primary">
              <i class="fas fa-file-medical mr-1"></i>Add resource
            </div>
          </div>
        </div>
        <mat-form-field appearance="outline" class="w-100">
          <textarea matInput type="text" placeholder=""></textarea>
        </mat-form-field>
      </div>
      <div class="col-3">
        <h5>Sharing Settings</h5>
        <mat-checkbox class="ml-2">Allow downloads</mat-checkbox>
        <mat-checkbox class="ml-2">Send me a copy</mat-checkbox>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Save</button>
  </div>
</ng-template>

<!-- get a link modal -->
<ng-template #getLink let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Get a Link</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Name</mat-label>
      <input type="text" matInput placeholder="Name">
    </mat-form-field>
    <mat-checkbox>Allow downloads</mat-checkbox>
    <mat-label class="d-block mt-3">Content</mat-label>
    <div class="row">
      <div class="col-9">
        <mat-form-field appearance="outline" class="w-100 search">
          <mat-label class="ml-2">Search for content</mat-label>
          <input class="ml-2" type="text" matInput placeholder="Search for content">
          <i class="fa fa-search text-secondary" matPrefix style="font-size: 18px;"></i>
        </mat-form-field>
      </div>
      <div class="col-3 mt-3">
        <div class="btn btn-primary">Browse</div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Save</button>
  </div>
</ng-template>

<!-- add folder -->
<ng-template #addFolder let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">New Folder</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Folder Name</mat-label>
      <input type="text" matInput placeholder="Folder Name">
    </mat-form-field>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Create</button>
  </div>
</ng-template>

<!-- add url -->
<ng-template #addURL let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Add URL</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Name</mat-label>
      <input type="text" matInput placeholder="Eg. Hiforce Homepage">
    </mat-form-field>
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>URL</mat-label>
      <input type="text" matInput placeholder="Eg. https://www.hiforce.com">
    </mat-form-field>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Add</button>
  </div>
</ng-template>

<!-- share with colleagues -->
<ng-template #shareColl let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Add URL</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <div class="file-sharing">
      File Sharing is ON
      <mat-slide-toggle class="float-right" #sharingValue></mat-slide-toggle>
    </div>
    <div class="rounded border border-primary d-flex text-justify text-primary px-2 my-3 py-2">
      <i class="fa fa-info-circle align-self-center mr-2"></i>
      File sharing is enabled for this file. Anyone at Hi-Force Hydraulic Tools with the file link will be able to view
      this file.
    </div>
    <div *ngIf="sharingValue.checked">
      <mat-label>Share Options:</mat-label>
      <mat-radio-group aria-label="Select an option" class="d-block">
        <mat-radio-button value="link" class="mx-3" checked="true" #link>Share by
          Link
        </mat-radio-button>
        <mat-radio-button value="email">Share by Email</mat-radio-button>
      </mat-radio-group>
      <hr>
      <div class="link" *ngIf="link.checked">
        <mat-form-field appearance="outline" class="w-100 copy-link">
          <mat-label>Get Link</mat-label>
          <input type="text" matInput value="https://www.google.com" readonly #linkText>
          <button matSuffix class="btn btn-primary" (click)="copyLink(linkText)">Copy Link</button>
        </mat-form-field>
      </div>
      <div class="email" *ngIf="!link.checked">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Email To</mat-label>
          <input type="text" matInput placeholder="Enter Names or Email Address">
        </mat-form-field>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Note</mat-label>
          <textarea type="text" matInput placeholder="Add a note ..."></textarea>
        </mat-form-field>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')"
      [disabled]="!sharingValue.checked">Share</button>
  </div>
</ng-template>

<!-- add to collection -->
<ng-template #addtoCollection let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Add to Collection</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body" ngbAutofocus>
    <ul class="list-unstyled">
      <li (click)="openModal(newCollection)" class="d-flex text-primary px-3 curs-ptr">
        <div class="icon mr-2"><i class="fas fa-folder-plus" style="font-size:40px;"></i></div>
        <div class="info align-self-center">Create a new Collection</div>
      </li>
      <li class="d-flex border-top px-3 py-2 curs-ptr" *ngFor="let t of testArr">
        <div class="icon mr-2">
          <img src="assets/images/discription.png" style="max-height:50px;">
        </div>
        <div class="info align-self-center">
          <div class="name">ABC</div>
          <div class="text-secondary" style="font-size:12px;">
            <span class="modified">4 Days ago</span>
            <span class="mx-2">|</span>
            <span class="items">1 Item</span>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close('Save click')">Share</button>
  </div>
</ng-template>
