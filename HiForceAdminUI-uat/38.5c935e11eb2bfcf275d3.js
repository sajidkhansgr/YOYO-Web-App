(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{kUR2:function(t,n,c){"use strict";c.r(n),c.d(n,"CollectionInnerModule",(function(){return X}));var e=c("ofXK"),i=c("tyNb"),o=c("kmnG"),s=c("qFsG"),r=c("bSwM"),a=c("0IaG"),l=c("A5z7"),d=c("5+WD"),b=c("IJgu"),p=c("OQ+D"),u=c("E/a4"),m=c("TNUc"),g=c("Q6ig"),f=c("vLcq"),h=c("c2Mc"),v=c("fXoL"),S=c("1kSV"),C=c("CFzk"),k=c("5eHb"),A=c("668k"),T=c("WoM1");function D(t,n){1&t&&v.Ob(0,"app-loader",3),2&t&&v.pc("type","page")}const y=function(t,n){return{"fa-list-ul":t,"fa-th-large":n}};function M(t,n){if(1&t){const t=v.Ub();v.Tb(0,"i",28),v.ec("click",(function(){v.Bc(t);const n=v.ic(2);return n.view=!n.view})),v.Sb()}if(2&t){const t=v.ic(2);v.pc("ngClass",v.uc(1,y,t.view,!t.view))}}function I(t,n){if(1&t&&(v.Tb(0,"div"),v.Ob(1,"img",54),v.Sb()),2&t){const t=v.ic().$implicit,n=v.ic(4);v.Ab(1),v.pc("src",n.getImg(t),v.Dc)}}function x(t,n){if(1&t&&(v.Tb(0,"div",55),v.Mc(1),v.Sb()),2&t){const t=v.ic().$implicit;v.Ab(1),v.Oc("Page\xa0",t.pageNo,"")}}function O(t,n){if(1&t){const t=v.Ub();v.Tb(0,"div",33),v.Kc(1,I,2,1,"div",34),v.Tb(2,"div",35),v.Tb(3,"div",36),v.Tb(4,"div",37),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).navgToCntnt(c)})),v.Ob(5,"img",38),v.Sb(),v.Tb(6,"div",39),v.Tb(7,"div",40),v.Tb(8,"button",41),v.Ob(9,"i",42),v.Sb(),v.Tb(10,"div",43),v.Tb(11,"a",14),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).cmnModal("email",void 0,c)})),v.Ob(12,"i",8),v.Mc(13,"Email"),v.Sb(),v.Tb(14,"a",14),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).cmnModal("getLink",void 0,c)})),v.Ob(15,"i",9),v.Mc(16,"Get a link"),v.Sb(),v.Sb(),v.Sb(),v.Tb(17,"div",44),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).cmnModal("addToCollection","",c)})),v.Ob(18,"i",45),v.Sb(),v.Tb(19,"div",46),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).delContent(c.id)})),v.Ob(20,"i",47),v.Sb(),v.Sb(),v.Sb(),v.Tb(21,"div",48),v.Tb(22,"div",49),v.Mc(23),v.Sb(),v.Tb(24,"div",50),v.Kc(25,x,2,1,"div",51),v.Sb(),v.Tb(26,"div",52),v.Tb(27,"mat-checkbox",53),v.ec("change",(function(c){v.Bc(t);const e=n.$implicit;return v.ic(4).selMe(c.checked,e)})),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Sb()}if(2&t){const t=n.$implicit,c=v.ic(4);v.Ab(5),v.pc("src",c.getImg(t),v.Dc),v.Ab(18),v.Nc(t.name),v.Ab(2),v.pc("ngIf",t.pageNo),v.Ab(2),v.pc("checked",t.chk)}}function w(t,n){if(1&t){const t=v.Ub();v.Tb(0,"div",31),v.ec("cdkDropListDropped",(function(n){return v.Bc(t),v.ic(3).drop(n)})),v.Kc(1,O,28,4,"div",32),v.Sb()}if(2&t){const t=v.ic(3);v.pc("cdkDropListData",t.cntntArr),v.Ab(1),v.pc("ngForOf",t.cntntArr)}}function L(t,n){1&t&&(v.Tb(0,"div",56),v.Mc(1," No Content Found "),v.Sb())}function B(t,n){if(1&t&&(v.Rb(0),v.Kc(1,w,2,2,"div",29),v.Kc(2,L,2,0,"div",30),v.Qb()),2&t){const t=v.ic(2);v.Ab(1),v.pc("ngIf",t.cntntArr.length>0),v.Ab(1),v.pc("ngIf",0==t.cntntArr.length)}}function $(t,n){if(1&t){const t=v.Ub();v.Tb(0,"tr",65),v.Tb(1,"td",66),v.Tb(2,"mat-checkbox",53),v.ec("change",(function(c){v.Bc(t);const e=n.$implicit;return v.ic(4).selMe(c.checked,e)})),v.Sb(),v.Sb(),v.Tb(3,"td",66),v.Tb(4,"div",67),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).navgToCntnt(c)})),v.Tb(5,"div",68),v.Ob(6,"img",38),v.Sb(),v.Tb(7,"div",69),v.Mc(8),v.Sb(),v.Sb(),v.Sb(),v.Tb(9,"td",66),v.Mc(10),v.jc(11,"date"),v.Sb(),v.Tb(12,"td",70),v.Tb(13,"div",71),v.Tb(14,"div",40),v.Tb(15,"button",41),v.Ob(16,"i",42),v.Sb(),v.Tb(17,"div",43),v.Tb(18,"a",14),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).cmnModal("email",void 0,c)})),v.Ob(19,"i",8),v.Mc(20,"Email"),v.Sb(),v.Tb(21,"a",14),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).cmnModal("getLink",void 0,c)})),v.Ob(22,"i",9),v.Mc(23,"Get a link"),v.Sb(),v.Sb(),v.Sb(),v.Tb(24,"div",46),v.ec("click",(function(){return v.Bc(t),v.ic(4).cmnModal("addToCollection")})),v.Ob(25,"i",45),v.Sb(),v.Tb(26,"div",46),v.ec("click",(function(){v.Bc(t);const c=n.$implicit;return v.ic(4).delContent(c.id)})),v.Ob(27,"i",47),v.Sb(),v.Sb(),v.Sb(),v.Sb()}if(2&t){const t=n.$implicit,c=v.ic(4);v.Ab(2),v.pc("checked",t.chk),v.Ab(4),v.pc("src",c.getImg(t),v.Dc),v.Ab(2),v.Nc(t.name),v.Ab(2),v.Nc(v.lc(11,4,t.updatedDate,"dd MMM, yyyy")||"N/A")}}function N(t,n){if(1&t){const t=v.Ub();v.Tb(0,"tbody",63),v.ec("cdkDropListDropped",(function(n){return v.Bc(t),v.ic(3).drop(n)})),v.Kc(1,$,28,7,"tr",64),v.Sb()}if(2&t){const t=v.ic(3);v.pc("cdkDropListData",t.cntntArr),v.Ab(1),v.pc("ngForOf",t.cntntArr)}}function K(t,n){1&t&&(v.Tb(0,"div",72),v.Mc(1," No Content Found "),v.Sb())}function z(t,n){if(1&t){const t=v.Ub();v.Tb(0,"div",57),v.Tb(1,"table",58),v.Tb(2,"thead"),v.Tb(3,"tr"),v.Tb(4,"th"),v.Tb(5,"mat-checkbox",59),v.ec("change",(function(n){return v.Bc(t),v.ic(2).selAll(n.checked)})),v.Sb(),v.Sb(),v.Tb(6,"th"),v.Mc(7,"Name"),v.Ob(8,"i",60),v.Sb(),v.Tb(9,"th"),v.Mc(10,"Date Modified"),v.Ob(11,"i",60),v.Sb(),v.Ob(12,"th"),v.Sb(),v.Sb(),v.Kc(13,N,2,2,"tbody",61),v.Sb(),v.Kc(14,K,2,0,"div",62),v.Sb()}if(2&t){const t=v.ic(2);v.Ab(13),v.pc("ngIf",t.cntntArr.length>0),v.Ab(1),v.pc("ngIf",0==t.cntntArr.length)}}function F(t,n){if(1&t){const t=v.Ub();v.Tb(0,"div",4),v.Tb(1,"h3",5),v.Mc(2),v.Tb(3,"div",6),v.Tb(4,"div",7),v.ec("click",(function(){v.Bc(t);const n=v.ic();return n.cmnModal("email",void 0,void 0,n.selColctn)})),v.Ob(5,"i",8),v.Sb(),v.Tb(6,"div",7),v.ec("click",(function(){v.Bc(t);const n=v.ic();return n.cmnModal("getLink",void 0,void 0,n.selColctn)})),v.Ob(7,"i",9),v.Sb(),v.Tb(8,"div",10),v.Tb(9,"div",11),v.Ob(10,"i",12),v.Sb(),v.Tb(11,"div",13),v.Tb(12,"a",14),v.ec("click",(function(){return v.Bc(t),v.ic().cmnModal("coll","dupl")})),v.Ob(13,"i",15),v.Mc(14,"Duplicate "),v.Sb(),v.Tb(15,"a",14),v.ec("click",(function(){return v.Bc(t),v.ic().cmnModal("coll","ren")})),v.Ob(16,"i",16),v.Mc(17,"Rename "),v.Sb(),v.Tb(18,"a",17),v.Ob(19,"i",18),v.Mc(20,"Download "),v.Tb(21,"div",19),v.Tb(22,"a",20),v.Ob(23,"i",21),v.Mc(24,"As a single PDF"),v.Sb(),v.Tb(25,"a",20),v.Ob(26,"i",22),v.Mc(27,"As separate items"),v.Sb(),v.Sb(),v.Sb(),v.Tb(28,"a",23),v.ec("click",(function(){return v.Bc(t),v.ic().actDeactColctn()})),v.Ob(29,"i"),v.Mc(30),v.Sb(),v.Sb(),v.Sb(),v.Kc(31,M,1,4,"i",24),v.Tb(32,"button",25),v.ec("click",(function(){return v.Bc(t),v.ic().cmnModal("resource")})),v.Mc(33,"Add Resource"),v.Sb(),v.Sb(),v.Sb(),v.Kc(34,B,3,2,"ng-container",26),v.Kc(35,z,15,2,"div",27),v.Sb()}if(2&t){const t=v.ic();v.Ab(2),v.Oc(" ",t.selColctn.name," "),v.Ab(26),v.Db("dropdown-item curs-ptr ",t.selColctn.isActive?"text-primary":"text-success",""),v.Ab(1),v.Db("mr-1 fas fa-toggle-",t.selColctn.isActive?"off":"on",""),v.Ab(1),v.Oc(" ",t.selColctn.isActive?"Deactivate":"Activate"," "),v.Ab(1),v.pc("ngIf",t.cntntArr.length>0),v.Ab(3),v.pc("ngIf",t.view),v.Ab(1),v.pc("ngIf",!t.view)}}function P(t,n){if(1&t){const t=v.Ub();v.Tb(0,"app-sel-itm-fxd-div",73),v.ec("delContent",(function(){return v.Bc(t),v.ic().delContent(void 0)}))("clrSelData",(function(){return v.Bc(t),v.ic().clrSel()})),v.Sb()}if(2&t){const t=v.ic();v.pc("selArr",t.selCntntArr)("type","content")("content",!0)}}let U=(()=>{class t{constructor(t,n,c,e,i,o){this.modalService=t,this.route=n,this.colctnSrv=c,this.toastr=e,this.router=i,this.dialog=o,this.view=!0,this.copyLink=t=>{t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")},this.drop=t=>{t.previousContainer===t.container?t.previousContainer.data[t.previousIndex]!=t.container.data[t.currentIndex]&&this.rearrDataInWrkspc(t):console.log("dasadsadsads else ")}}ngOnInit(){this.routerSubs=this.route.params.subscribe(t=>{this.id=parseInt(t.cid),this.initialiseState(),this.getColctn()})}initialiseState(){this.view=!0,this.disabled=!1,this.loading=!0,this.selColctn=void 0,this.selCntntArr=[],this.multiForm=0,this.cntntArr=[],this.addContentArr=[]}cmnModal(t,n,c,e){if("email"==t){const t=this.modalService.open(p.a,{size:"lg"});t.componentInstance.type=e?"collection":"content",t.componentInstance.data=e||c}else if("getLink"==t){const t=this.modalService.open(u.a,{size:"lg"});t.componentInstance.type=e?"collection":"content",t.componentInstance.data=e||c}else if("addToCollection"==t){const t=this.modalService.open(m.a,{size:"lg"});t.componentInstance.data=Object.assign(Object.assign({},c),{type:"coll-inr"}),t.result.then(t=>{t&&t.id==this.id&&this.getCntntColl()})}else if("coll"==t){const t=this.modalService.open(g.a,{size:"lg"});t.componentInstance.colctn=this.selColctn,t.componentInstance.type=n,t.result.then(t=>{t&&"ren"==n&&(this.selColctn.name=t.name)})}else"resource"==t&&this.modalService.open(f.a,{size:"lg"}).result.then(t=>{t&&(this.addContentArr=t,this.addContent())})}addContent(){this.disabled=!0;let t={id:this.id,contents:[]};for(let n=0;n<this.addContentArr.length;n++)t.contents.push(this.addContentArr[n].contentId?this.addContentArr[n].contentId:this.addContentArr[n].id);this.colctnSrv.addContentColctn(t).subscribe(t=>{t&&(this.toastr.success(t.message||"Content added successfully","Success!"),this.getCntntColl()),this.dismissModal(),this.disabled=!1},t=>{this.dismissModal(),this.disabled=!1})}delContent(t){let n=t?[t]:this.selCntntArr.map(t=>t.id),c=1==n.length?"":"s";this.dialog.open(b.a,{data:{msg:`Are you sure you want to remove ${1==n.length?"this":"these"} content${c} from collection?`,title:"Remove Content"+c},autoFocus:!1}).afterClosed().subscribe(t=>{if(t){let t={collectionId:this.id,collectionContentIds:n};this.colctnSrv.delContentColctn(t).subscribe(t=>{t&&(this.toastr.success(t.message||`Content${c} removed successfully`,"Success!"),this.selCntntArr=[],this.getCntntColl())},n=>{this.toastr.error(t.message||"Unable to remove content"+c,"Error!")})}})}selMe(t,n){t?this.selCntntArr.push(n):this.selCntntArr=this.selCntntArr.filter(t=>t.contentId!=n.contentId||t.pageNo!=n.pageNo)}clrSel(){this.selCntntArr=[],this.cntntArr=this.cntntArr.map(t=>Object.assign(Object.assign({},t),{chk:!1}))}selAll(t){t?(this.selCntntArr=this.cntntArr,this.cntntArr=this.cntntArr.map(t=>Object.assign(Object.assign({},t),{chk:!0}))):this.clrSel()}getCntntColl(){this.loading=!0,this.cntntArr=[],this.colctnSrv.getContentColctn(this.id).subscribe(t=>{t&&Array.isArray(t.result)&&t.result.length>0&&(this.cntntArr=t.result.map(t=>Object.assign(Object.assign({},t),{chk:!1}))),this.loading=!1},t=>{this.loading=!1})}actDeactColctn(){let t=this.selColctn.isActive?"deactivate":"activate";this.dialog.open(b.a,{data:{msg:`Are you sure you want to ${t} this collection?`,title:(this.selColctn.isActive?"Deactivate":"Activate")+" collection"},autoFocus:!1}).afterClosed().subscribe(n=>{n&&this.colctnSrv.actDeactColctn([this.id],!this.selColctn.isActive).subscribe(n=>{n?(this.toastr.success(`Collection ${t}d successfully`,"Success!"),this.getColctn()):this.toastr.error(`Unable to ${t} collection`,"Error!")},t=>{})})}getColctn(){this.loading=!0,this.colctnSrv.getColctn(this.id).subscribe(t=>{t&&t.result&&t.result.id?(this.selColctn=t.result,this.getCntntColl()):this.router.navigate(["/web-app/resource/collections"])},t=>{this.router.navigate(["/web-app/resource/collections"])})}navgToCntnt(t){this.router.navigate(["/web-app/view/"+t.contentId])}getImg(t){return h.a.getImg(t,"icon")}rearrDataInWrkspc(t){let n={collectionId:this.id,collectionDataIds:this.cntntArr.map(t=>t.contentId)};Object(d.f)(t.container.data,t.previousIndex,t.currentIndex),this.colctnSrv.rearrCntntColl(n).subscribe(t=>{t?this.toastr.success("Rearrange successfully","Success!"):this.toastr.error("Unable to save rearrange","Error!")},t=>{})}openModal(t){this.modalService.open(t,{size:"lg"}).result.then(t=>{},t=>{})}dismissModal(){this.modalService&&this.modalService.dismissAll()}ngOnDestroy(){this.dismissModal()}}return t.\u0275fac=function(n){return new(n||t)(v.Nb(S.h),v.Nb(i.a),v.Nb(C.a),v.Nb(k.b),v.Nb(i.d),v.Nb(a.b))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-collection-inner"]],decls:3,vars:3,consts:[[3,"type",4,"ngIf"],["class","main main-employee p-3 container mt-3",4,"ngIf"],[3,"selArr","type","content","delContent","clrSelData",4,"ngIf"],[3,"type"],[1,"main","main-employee","p-3","container","mt-3"],[1,"mb-4","clearfix","heading","align-self-center"],[1,"float-right","d-flex"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-envelope","mr-1"],[1,"fa","fa-link","mr-1"],[1,"dropdown","align-self-center","mr-5"],["type","button","id","optionsDD","data-toggle","dropdown",1,"btn","btn-light","curs-ptr"],[1,"fas","fa-ellipsis-h"],["aria-labelledby","optionsDD",1,"dropdown-menu"],[1,"dropdown-item","curs-ptr",3,"click"],[1,"fas","fa-copy","mr-1"],[1,"fas","fa-edit","mr-1"],[1,"dropdown-item","dd","curs-ptr"],[1,"fa","fa-download","mr-1"],[1,"dropdown-menu"],[1,"dropdown-item"],[1,"fas","fa-file-pdf","mr-1"],[1,"fas","fa-file-alt","mr-1"],[3,"click"],["class","fa mr-4 curs-ptr align-self-center",3,"ngClass","click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[4,"ngIf"],["class","mt-2 row my-files",4,"ngIf"],[1,"fa","mr-4","curs-ptr","align-self-center",3,"ngClass","click"],["class","mt-2 row my-files","cdkDropList","","id","cntntLists",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["class","text-center mt-5 text-secondary","style","font-size: 20px;",4,"ngIf"],["cdkDropList","","id","cntntLists",1,"mt-2","row","my-files",3,"cdkDropListData","cdkDropListDropped"],["class","card-container col-lg-3 col-md-4 col-sm-6 my-3 mx-auto mx-sm-0","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"card-container","col-lg-3","col-md-4","col-sm-6","my-3","mx-auto","mx-sm-0"],[4,"cdkDragPreview"],[1,"card","curs-ptr"],[1,"card-body"],[1,"imagePreview","text-center",3,"click"],[3,"src"],[1,"options","rounded"],[1,"dropleft"],["type","button","id","shareDD","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn"],[1,"fas","fa-share-square"],["aria-labelledby","shareDD",1,"dropdown-menu"],[1,"btn","my-1",3,"click"],[1,"fas","fa-folder-plus"],[1,"btn",3,"click"],[1,"fas","fa-trash-alt"],[1,"card-footer"],[1,"name","text-truncate"],[1,"float-left","text-secondary","d-flex"],["class","items",4,"ngIf"],[1,"float-right"],[3,"checked","change"],["alt","Thumbnail",2,"max-height","180px","max-width","100px",3,"src"],[1,"items"],[1,"text-center","mt-5","text-secondary",2,"font-size","20px"],[1,"mt-2","row","my-files"],[1,"table","table-hover"],[3,"change"],[1,"fas","fa-sort-down","ml-1","align-top"],["cdkDropList","","id","cntntLists",3,"cdkDropListData","cdkDropListDropped",4,"ngIf"],["class","mx-auto mt-5 text-secondary","style","font-size: 20px;",4,"ngIf"],["cdkDropList","","id","cntntLists",3,"cdkDropListData","cdkDropListDropped"],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[1,"align-middle"],[1,"d-flex",3,"click"],[1,"imagePreview","border","mr-2"],[1,"name","align-self-center"],[1,"align-middle","options"],[1,"d-flex"],[1,"mx-auto","mt-5","text-secondary",2,"font-size","20px"],[3,"selArr","type","content","delContent","clrSelData"]],template:function(t,n){1&t&&(v.Kc(0,D,1,1,"app-loader",0),v.Kc(1,F,36,11,"div",1),v.Kc(2,P,1,3,"app-sel-itm-fxd-div",2)),2&t&&(v.pc("ngIf",n.loading),v.Ab(1),v.pc("ngIf",!n.loading),v.Ab(1),v.pc("ngIf",n.selCntntArr.length>0))},directives:[e.m,A.a,e.k,d.c,e.l,d.a,d.b,r.a,T.a],pipes:[e.e],styles:[".dd[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{top:55%;left:-120%}.dd[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}.min-height-val[_ngcontent-%COMP%]{min-height:230px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-dragging){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t})();var j=c("zJym"),_=c("tqvG"),G=c("Amnm"),R=c("IpHC"),E=c("u7Mw"),q=c("OraM"),J=c("FGg4"),W=c("P/0q");let H=(()=>{class t{}return t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(n){return new(n||t)},providers:[C.a,W.a,J.a,q.a],imports:[[e.c,j.a,o.e,s.c,r.b]]}),t})();const Q=[{path:"",component:U}];let X=(()=>{class t{}return t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(n){return new(n||t)},providers:[C.a],imports:[[e.c,i.h.forChild(Q),o.e,s.c,r.b,a.e,l.e,d.d,j.a,_.a,G.a,R.a,E.a,H]]}),t})()}}]);